<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Triumind Collective - Level Up Your Mindset</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" xintegrity="sha512-iecdLmaskl7CVkqkXNQ/ZH/XLlvWZOJyj7Yy7tcenmpD1ypASozpmT/E0iPtmFIB46ZmdtAc9eNBvH0H/ZpiBw==" crossorigin="anonymous" referrerpolicy="no-referrer" />

    <style>
        /* --- Main Website Styles --- */
        body {
            font-family: 'Inter', sans-serif;
            background-color: #0a0a0a;
            color: #f0f0f0;
            overflow-x: hidden;
            cursor: none; /* Custom cursor will handle visibility */
        }
        body.site-takeover-active, body.cart-open {
            overflow: hidden;
        }

        #custom-cursor {
            position: fixed;
            left: 0; top: 0; width: 20px; height: 20px;
            border: 2px solid rgba(255, 255, 255, 0.7);
            border-radius: 50%; pointer-events: none;
            transform: translate(-50%, -50%); z-index: 10001; /* Above cart overlay */
            transition: width 0.2s ease, height 0.2s ease, border-color 0.2s ease, box-shadow 0.2s ease, transform 0.05s linear, opacity 0.2s ease;
            box-shadow: 0 0 15px 5px rgba(255, 255, 255, 0.5);
            opacity: 1;
        }
        body:not(.site-takeover-active):not(.cart-open):has(a:hover, button:hover, input:hover, textarea:hover, .img-hover-effect:hover, .cart-icon-container:hover) #custom-cursor {
             width: 30px; height: 30px;
             border-color: rgba(255, 255, 255, 1);
             box-shadow: 0 0 20px 8px rgba(255, 255, 255, 0.7);
        }
        body.site-takeover-active #custom-cursor, body.cart-open #custom-cursor {
            opacity: 0;
        }


        #header {
            position: fixed; top: 1rem; left: 50%;
            transform: translateX(-50%); width: calc(100% - 2rem); max-width: 1100px;
            z-index: 50; background-color: rgba(40, 40, 40, 0.8);
            backdrop-filter: blur(10px); -webkit-backdrop-filter: blur(10px);
            border-radius: 9999px; box-shadow: 0 5px 15px rgba(0, 0, 0, 0.4);
            transition: top 0.3s ease, background-color 0.3s ease, opacity 0.5s ease;
            padding: 0.5rem 0;
        }
        /* Header remains visible if cart is open as a centered modal */
        body.site-takeover-active #header {
            opacity: 0; pointer-events: none;
        }


        .contact-button {
            background-color: #1a1a1a; color: #f0f0f0; padding: 0.5rem 1.25rem;
            border-radius: 9999px; font-weight: 500; transition: background-color 0.2s ease, color 0.2s ease;
            display: inline-flex; align-items: center;
        }
        .contact-button:hover { background-color: #383838; color: #ffffff; }
        .contact-button i { margin-left: 0.5rem; }

        .spotlight-text {
            position: relative;
            background: radial-gradient(circle 200px at var(--x, 50%) var(--y, 50%), rgba(255, 255, 255, 0.8), rgba(255, 255, 255, 0.1));
            background-clip: text; -webkit-background-clip: text; color: transparent;
            transition: background 0.05s linear;
        }
        .hero-blob { transition: transform 1.5s cubic-bezier(0.175, 0.885, 0.32, 1.275); }

        .fade-in { opacity: 0; transform: translateY(20px); transition: opacity 0.8s ease-out, transform 0.8s ease-out; }
        .fade-in.visible { opacity: 1; transform: translateY(0); }

        html { scroll-behavior: smooth; }

        body:not(.site-takeover-active):not(.cart-open) ::-webkit-scrollbar { width: 8px; }
        body:not(.site-takeover-active):not(.cart-open) ::-webkit-scrollbar-track { background: #1a1a1a; }
        body:not(.site-takeover-active):not(.cart-open) ::-webkit-scrollbar-thumb { background: #4a4a4a; border-radius: 4px; }
        body:not(.site-takeover-active):not(.cart-open) ::-webkit-scrollbar-thumb:hover { background: #6a6a6a; }

        .btn-hover-effect { transition: transform 0.3s ease, box-shadow 0.3s ease; cursor: none; position: relative; z-index: 1; }
        .btn-hover-effect:hover { transform: translateY(-3px); box-shadow: 0 10px 20px rgba(0, 0, 0, 0.4); }

        .img-hover-effect { transition: transform 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94), filter 0.4s ease; filter: grayscale(50%); cursor: none; }
        .img-hover-effect:hover { transform: scale(1.05); filter: grayscale(0%); }

        #newsletter-email:focus { border-color: #a855f7; box-shadow: 0 0 0 2px rgba(168, 85, 247, 0.5); }

        .countdown-item { background-color: rgba(255, 255, 255, 0.05); padding: 0.75rem 1rem; border-radius: 0.5rem; min-width: 70px; }
        .countdown-number { font-size: 2rem; font-weight: 700; line-height: 1; color: #f0f0f0; }
        .countdown-label { font-size: 0.75rem; text-transform: uppercase; letter-spacing: 0.05em; color: #a0a0a0; }

        .review-card { background-color: #1a1a1a; border: 1px solid #333; border-radius: 0.75rem; padding: 1.5rem; text-align: left; }
        .review-stars { color: #eab308; }

        .modal { display: none; position: fixed; z-index: 100; left: 0; top: 0; width: 100%; height: 100%; overflow: auto; background-color: rgba(0,0,0,0.7); backdrop-filter: blur(5px); -webkit-backdrop-filter: blur(5px); }
        .modal-content { background-color: #1f1f1f; color: #f0f0f0; margin: 10% auto; padding: 2rem; border: 1px solid #444; border-radius: 0.75rem; width: 90%; max-width: 600px; position: relative; box-shadow: 0 10px 30px rgba(0,0,0,0.5); }
        .close-button { color: #aaa; position: absolute; top: 1rem; right: 1.5rem; font-size: 2rem; font-weight: bold; line-height: 1; }
        .close-button:hover, .close-button:focus { color: #fff; text-decoration: none; cursor: pointer; }
        .size-table { width: 100%; border-collapse: collapse; margin-top: 1rem; }
        .size-table th, .size-table td { border: 1px solid #444; padding: 0.75rem; text-align: center; }
        .size-table th { background-color: #333; font-weight: bold; }

        a, button, input, textarea, .cart-icon-container { cursor: none; position: relative; z-index: 1; }
        input[type="email"], textarea { caret-color: white; }

        @keyframes blob { 0%, 100% { transform: translate(0, 0) scale(1); } 33% { transform: translate(30px, -50px) scale(1.1); } 66% { transform: translate(-20px, 20px) scale(0.9); } }
        .animate-blob { animation: blob 10s infinite ease-in-out; }
        .animation-delay-2000 { animation-delay: 2s; }
        .animation-delay-4000 { animation-delay: 4s; }

        #main-site-content-wrapper { transition: opacity 0.4s ease, filter 0.4s ease, transform 0.4s ease; }
        body.site-takeover-active #main-site-content-wrapper { opacity: 0; pointer-events: none; }
        body.cart-open #main-site-content-wrapper {
            filter: blur(8px);
            transform: scale(0.98);
            opacity: 0.6;
            pointer-events: none;
        }


        #full-site-countdown-overlay {
            position: fixed; inset: 0; background-color: #0a0a0a;
            z-index: 20000; display: flex; flex-direction: column;
            align-items: center; justify-content: center; color: #f0f0f0;
            opacity: 0; pointer-events: none; transition: opacity 0.5s ease-in-out;
        }
        #full-site-countdown-overlay.visible { opacity: 1; pointer-events: auto; }
        #full-site-countdown-overlay .brand-logo { font-size: 3rem; font-weight: 900; text-transform: uppercase; letter-spacing: -0.025em; margin-bottom: 1rem; }
        #full-site-countdown-overlay .takeover-message { font-size: 1.5rem; margin-bottom: 2rem; color: #a0a0a0; max-width: 600px; text-align: center; }
        #full-site-countdown-overlay .countdown-timer-large { display: flex; gap: 1.5rem; }
        #full-site-countdown-overlay .countdown-item-large { background-color: rgba(255, 255, 255, 0.08); padding: 1.5rem 2rem; border-radius: 0.75rem; text-align: center; min-width: 120px; }
        #full-site-countdown-overlay .countdown-number-large { font-size: 4rem; font-weight: 700; line-height: 1; }
        #full-site-countdown-overlay .countdown-label-large { font-size: 1rem; text-transform: uppercase; letter-spacing: 0.05em; color: #a0a0a0; margin-top: 0.5rem; }
        #full-site-countdown-overlay .drop-live-message { font-size: 2.5rem; font-weight: bold; color: #8B5CF6; margin-top: 2rem; }
        
        /*.hidden { display: none !important; }*/

        /* Cart Styles - Centered Modal */
        #cart-overlay { /* New overlay for background dimming */
            position: fixed;
            inset: 0;
            background-color: rgba(0,0,0,0.6); /* Semi-transparent black */
            z-index: 9998; /* Below cart modal, above main content */
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.4s ease;
        }
        #cart-overlay.open {
            opacity: 1;
            pointer-events: auto; /* Allow clicking overlay to close cart */
        }

        #cart-modal {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%) scale(0.95); /* Start slightly scaled down */
            width: 90%;
            max-width: 500px; /* Adjust as needed for a box */
            max-height: 80vh; /* Max height to prevent overflow on smaller screens */
            background-color: #16161d; /* Slightly different dark shade for cart */
            z-index: 9999; /* Above overlay */
            box-shadow: 0 15px 40px rgba(0,0,0,0.6);
            border-radius: 0.75rem; /* Rounded corners for the box */
            display: flex;
            flex-direction: column;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94), transform 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94);
            border: 1px solid rgba(255,255,255,0.1);
        }
        #cart-modal.open {
            opacity: 1;
            transform: translate(-50%, -50%) scale(1); /* Scale to full size */
            pointer-events: auto;
        }
        .cart-header {
            padding: 1.25rem 1.5rem; /* Adjusted padding */
            border-bottom: 1px solid #2a2a3a; /* Darker border */
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .cart-header h2 {
            font-size: 1.375rem; /* Slightly smaller title */
            font-weight: 600;
            color: #e0e0e0; /* Lighter text */
        }
        .cart-close-button {
            background: none;
            border: none;
            color: #9ca3af; /* Lighter gray */
            font-size: 1.75rem;
            line-height: 1;
            cursor: none;
            transition: color 0.2s ease;
        }
        .cart-close-button:hover {
            color: #f0f0f0;
        }
        .cart-body {
            flex-grow: 1;
            overflow-y: auto;
            padding: 1.5rem;
            /* Custom scrollbar for cart body */
        }
        .cart-body::-webkit-scrollbar { width: 6px; }
        .cart-body::-webkit-scrollbar-track { background: #1f1f2b; border-radius: 3px;}
        .cart-body::-webkit-scrollbar-thumb { background: #4a4a5a; border-radius: 3px;}
        .cart-body::-webkit-scrollbar-thumb:hover { background: #6a6a7a; }

        .cart-item {
            display: flex;
            align-items: center;
            margin-bottom: 1.25rem;
            padding-bottom: 1.25rem;
            border-bottom: 1px solid #2a2a3a;
        }
        .cart-item:last-child {
            margin-bottom: 0;
            border-bottom: none;
        }
        .cart-item-image {
            width: 70px; /* Slightly smaller image */
            height: 90px;
            object-fit: cover;
            border-radius: 0.25rem; /* Softer radius */
            margin-right: 1.25rem;
            border: 1px solid #333;
        }
        .cart-item-details {
            flex-grow: 1;
        }
        .cart-item-name {
            font-size: 0.95rem; /* Slightly smaller name */
            font-weight: 500;
            color: #e0e0e0;
            margin-bottom: 0.2rem;
        }
        .cart-item-price {
            font-size: 0.85rem;
            color: #9ca3af;
            margin-bottom: 0.4rem;
        }
        .cart-item-quantity {
            display: flex;
            align-items: center;
            font-size: 0.85rem;
        }
        .cart-item-quantity button {
            background-color: #2a2a3a;
            color: #e0e0e0;
            border: none;
            width: 22px;
            height: 22px;
            border-radius: 50%;
            font-weight: bold;
            margin: 0 0.4rem;
            transition: background-color 0.2s ease;
        }
        .cart-item-quantity button:hover {
            background-color: #3b3b4b;
        }
        .cart-item-remove button {
            background: none;
            border: none;
            color: #f87171; /* Softer red */
            font-size: 0.85rem;
            text-decoration: underline;
            transition: color 0.2s ease;
            padding: 0.25rem; /* Make it easier to click */
        }
        .cart-item-remove button:hover {
            color: #ef4444;
        }
        .cart-footer {
            padding: 1.25rem 1.5rem;
            border-top: 1px solid #2a2a3a;
            background-color: #1f1f2b; /* Slightly different dark shade */
            border-bottom-left-radius: 0.75rem; /* Match modal radius */
            border-bottom-right-radius: 0.75rem;
        }
        .cart-total {
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-size: 1.05rem; /* Slightly smaller total */
            font-weight: 600;
            margin-bottom: 0.875rem;
            color: #e0e0e0;
        }
        .cart-checkout-button {
            display: block;
            width: 100%;
            background-color: #8B5CF6;
            color: white;
            text-align: center;
            padding: 0.75rem 1rem; /* Adjusted padding */
            border-radius: 0.375rem;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            transition: background-color 0.2s ease;
        }
        .cart-checkout-button:hover {
            background-color: #7c3aed;
        }
        .empty-cart-message {
            text-align: center;
            color: #9ca3af;
            font-size: 0.95rem;
            padding: 2rem 0;
        }
        .cart-icon-container { /* Renamed from cart-icon-container to cart-link-container for clarity */
            position: relative;
            cursor: none;
            /* Styles for text link, similar to other nav links */
            color: #d1d5db; /* text-gray-300 */
            transition-property: color, background-color, border-color, text-decoration-color, fill, stroke, opacity, box-shadow, transform, filter, backdrop-filter;
            transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);
            transition-duration: 200ms;
        }
        .cart-icon-container:hover {
             color: #ffffff; /* hover:text-white */
        }
        .cart-item-count {
            position: absolute;
            top: -8px;
            right: -10px; /* Adjust if text width changes significantly */
            background-color: #8B5CF6;
            color: white;
            font-size: 0.7rem;
            font-weight: bold;
            width: 18px;
            height: 18px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            line-height: 1;
        }
        .toast-notification {
            position: fixed;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            background-color: #2a2a3a; /* Darker toast */
            color: white;
            padding: 10px 20px;
            border-radius: 0.375rem;
            z-index: 10001; /* Above cart overlay */
            opacity: 0;
            transition: opacity 0.3s ease, bottom 0.3s ease;
            font-size: 0.875rem;
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
        }
        .toast-notification.show {
            opacity: 1;
            bottom: 30px;
        }

    </style>
</head>
<body class="antialiased pt-24">
    <div id="custom-cursor"></div>

    <div id="main-site-content-wrapper">
        <header id="header">
            <nav class="container mx-auto px-6 py-2 flex justify-between items-center">
                <a href="#hero" class="text-2xl font-bold text-white">TRIUMIND</a>
                <div class="space-x-6 hidden md:flex items-center">
                   <!-- <a href="#hero" class="text-gray-300 hover:text-white transition duration-200">Start</a>
                    <a href="#gear" class="text-gray-300 hover:text-white transition duration-200">Gear</a>
                    <a href="#stories" class="text-gray-300 hover:text-white transition duration-200">Stories</a>
                    <a href="#reviews" class="text-gray-300 hover:text-white transition duration-200">Community</a>
                    <a href="#newsletter" class="text-gray-300 hover:text-white transition duration-200">Join</a>
                    <a href="#contact" class="contact-button">Connect <i class="fas fa-arrow-right"></i></a>-->
                    <div id="cart-icon-container" class="cart-icon-container relative">
                        <i class="fas fa-shopping-cart text-xl"></i> <span id="cart-item-count-badge" class="cart-item-count hidden">0</span>
                    </div>
                </div>
                <div class="flex items-center md:hidden">
                     <div id="mobile-cart-icon-container" class="cart-icon-container relative mr-4">
                        <i class="fas fa-shopping-cart text-xl"></i> <span id="mobile-cart-item-count-badge" class="cart-item-count hidden">0</span>
                    </div>
                    <button id="mobile-menu-button" class="text-gray-300 hover:text-white focus:outline-none">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16m-7 6h7" /></svg>
                    </button>
                </div>
            </nav>
            <div id="mobile-menu" class="hidden md:hidden rounded-b-lg shadow-lg">
                 <a href="#hero" class="block px-6 py-3 text-gray-300 hover:bg-gray-700 hover:text-white transition duration-200">Start</a>
                 <a href="#gear" class="block px-6 py-3 text-gray-300 hover:bg-gray-700 hover:text-white transition duration-200">Gear</a>
                 <a href="#stories" class="block px-6 py-3 text-gray-300 hover:bg-gray-700 hover:text-white transition duration-200">Stories</a>
                 <a href="#reviews" class="block px-6 py-3 text-gray-300 hover:bg-gray-700 hover:text-white transition duration-200">Community</a>
                 <a href="#newsletter" class="block px-6 py-3 text-gray-300 hover:bg-gray-700 hover:text-white transition duration-200">Join</a>
                 <a href="#contact" class="block px-6 py-3 text-gray-300 hover:bg-gray-700 hover:text-white transition duration-200 contact-button w-full text-left justify-start">Connect <i class="fas fa-arrow-right ml-2"></i></a>
            </div>
        </header>

        <section id="hero" class="min-h-screen flex items-center justify-center relative overflow-hidden">
            <div class="absolute inset-0 z-0 opacity-10">
                 <div class="hero-blob absolute top-1/4 left-1/4 w-72 h-72 bg-purple-600 rounded-full filter blur-3xl animate-blob"></div>
                 <div class="hero-blob absolute bottom-1/4 right-1/4 w-72 h-72 bg-blue-600 rounded-full filter blur-3xl animate-blob animation-delay-2000"></div>
                 <div class="hero-blob absolute top-1/3 right-1/3 w-60 h-60 bg-pink-600 rounded-full filter blur-3xl animate-blob animation-delay-4000"></div>
            </div>
            <div class="text-center relative z-10 px-4">
                <h1 id="spotlight-heading" class="spotlight-text text-6xl sm:text-8xl md:text-9xl lg:text-[180px] font-black uppercase tracking-tighter leading-none">Triumind</h1>
                <p class="mt-4 text-lg md:text-xl text-gray-400 max-w-2xl mx-auto fade-in">
                    It's your climb. Your pace. Your mindset. We just make the gear for it. <span class="font-semibold text-white">Welcome to the collective.</span>
                </p>
                <a href="#gear" class="mt-8 inline-block bg-white text-black px-8 py-3 rounded-lg font-semibold uppercase tracking-wide btn-hover-effect fade-in" style="transition-delay: 0.2s;">Explore the Gear</a>
            </div>
            <div class="absolute bottom-10 left-1/2 transform -translate-x-1/2 z-10">
                <svg class="w-6 h-6 text-gray-500 animate-bounce" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 14l-7 7m0 0l-7-7m7 7V3"></path></svg>
            </div>
        </section>

        <section id="countdown" class="py-12 md:py-16 bg-[#111111]">
            <div class="container mx-auto px-6 text-center">
                <h3 id="section-countdown-title" class="text-2xl md:text-3xl font-semibold mb-3 fade-in">Next Drop Incoming...</h3>
                <p id="section-countdown-subtitle" class="text-gray-400 mb-8 fade-in" style="transition-delay: 0.1s;">Get ready. Something fresh is on the horizon.</p>
                <div id="countdown-timer" class="flex justify-center items-center space-x-2 sm:space-x-4 md:space-x-6 fade-in" style="transition-delay: 0.2s;">
                    <div class="countdown-item text-center"><div id="days" class="countdown-number">00</div><div class="countdown-label">Days</div></div>
                    <div class="countdown-item text-center"><div id="hours" class="countdown-number">00</div><div class="countdown-label">Hours</div></div>
                    <div class="countdown-item text-center"><div id="minutes" class="countdown-number">00</div><div class="countdown-label">Mins</div></div>
                    <div class="countdown-item text-center"><div id="seconds" class="countdown-number">00</div><div class="countdown-label">Secs</div></div>
                </div>
                 <div id="section-drop-live-message" class="hidden text-2xl md:text-3xl font-semibold mt-8 text-purple-400 fade-in">The Drop is LIVE!</div>
            </div>
        </section>

        <section id="gear" class="py-20 md:py-32 bg-gradient-to-b from-[#111111] to-[#0a0a0a]">
            <div class="container mx-auto px-6">
                <h2 class="text-4xl md:text-5xl font-bold text-center mb-4 fade-in">The Gear</h2>
                <p class="text-gray-400 text-center max-w-xl mx-auto mb-16 fade-in" style="transition-delay: 0.1s;">Rep the mindset. Gear designed for the process, built bold for your path.</p>
                <div id="product-grid" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-10">
                    </div>
                <div id="no-products-storefront" class="hidden text-center text-gray-400 py-10 fade-in">
                    <p class="text-2xl">Fresh gear is being forged...</p>
                    <p>Check back soon for the latest drops.</p>
                </div>
                <div class="text-center mt-16 fade-in" style="transition-delay: 0.5s;">
                     <a href="#" class="bg-white text-black px-8 py-3 rounded-lg font-semibold uppercase tracking-wide btn-hover-effect">View All Gear (Archive)</a>
                </div>
            </div>
        </section>

        <section id="stories" class="py-20 md:py-32 bg-[#0a0a0a]">
             <div class="container mx-auto px-6 text-center">
                 <h2 class="text-4xl md:text-5xl font-bold text-center mb-6 fade-in">The Stories</h2>
                 <p class="text-gray-400 max-w-xl mx-auto mb-12 fade-in" style="transition-delay: 0.1s;">It's more than fabric. It's the mindset woven in. See how the Triumind collective lives it, breathes it, reps it.</p>
                 <div class="grid grid-cols-2 md:grid-cols-4 gap-4 fade-in" style="transition-delay: 0.2s;">
                    <img src="https://placehold.co/400x500/1f1f1f/555555?text=Story+1" alt="Style Story 1" class="rounded-lg shadow-lg img-hover-effect w-full h-auto object-cover aspect-[4/5]" onerror="this.onerror=null;this.src='https://placehold.co/400x500/1f1f1f/cccccc?text=Image+Not+Found';">
                    <img src="https://placehold.co/400x500/2a2a2a/555555?text=Story+2" alt="Style Story 2" class="rounded-lg shadow-lg img-hover-effect w-full h-auto object-cover aspect-[4/5]" onerror="this.onerror=null;this.src='https://placehold.co/400x500/2a2a2a/cccccc?text=Image+Not+Found';">
                    <img src="https://placehold.co/400x500/3a3a3a/555555?text=Story+3" alt="Style Story 3" class="rounded-lg shadow-lg img-hover-effect w-full h-auto object-cover aspect-[4/5]" onerror="this.onerror=null;this.src='https://placehold.co/400x500/3a3a3a/cccccc?text=Image+Not+Found';">
                    <img src="https://placehold.co/400x500/1a1a1a/555555?text=Story+4" alt="Style Story 4" class="rounded-lg shadow-lg img-hover-effect w-full h-auto object-cover aspect-[4/5]" onerror="this.onerror=null;this.src='https://placehold.co/400x500/1a1a1a/cccccc?text=Image+Not+Found';">
                 </div>
                 <div class="mt-12 fade-in" style="transition-delay: 0.3s;"><a href="#contact" class="text-purple-400 hover:text-purple-300 font-semibold group text-lg">Share Your Story? <span class="inline-block transition-transform duration-300 group-hover:translate-x-1">&rarr;</span></a></div>
            </div>
        </section>

        <section id="reviews" class="py-20 md:py-32 bg-[#111111]">
            <div class="container mx-auto px-6">
                <h2 class="text-4xl md:text-5xl font-bold text-center mb-6 fade-in">From the Collective</h2>
                <p class="text-gray-400 text-center max-w-xl mx-auto mb-16 fade-in" style="transition-delay: 0.1s;">Real talk from those on the journey. See what the community is saying.</p>
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
                    <div class="review-card fade-in" style="transition-delay: 0.2s;"><div class="flex items-center mb-3"><div class="review-stars">★★★★★</div><span class="ml-2 text-sm text-gray-400">- Alex R.</span></div><p class="text-gray-300 mb-2">"This hoodie is legit my go-to. Super comfy, feels premium, and lowkey reminds me to keep pushing."</p></div>
                    <div class="review-card fade-in" style="transition-delay: 0.3s;"><div class="flex items-center mb-3"><div class="review-stars">★★★★☆</div><span class="ml-2 text-sm text-gray-400">- Maya S.</span></div><p class="text-gray-300 mb-2">"Love the mindset behind Triumind. The cargo pants are sick, fit perfectly. Wish they had more colors tho!"</p></div>
                    <div class="review-card fade-in" style="transition-delay: 0.4s;"><div class="flex items-center mb-3"><div class="review-stars">★★★★★</div><span class="ml-2 text-sm text-gray-400">- Jay C.</span></div><p class="text-gray-300 mb-2">"Finally, a brand that gets it. Not about the hustle porn, just steady progress. The tee quality is fire too."</p></div>
                </div>
                 <div class="text-center mt-12 fade-in" style="transition-delay: 0.5s;"><a href="#" class="text-purple-400 hover:text-purple-300 font-semibold group text-lg">See All Reviews <span class="inline-block transition-transform duration-300 group-hover:translate-x-1">&rarr;</span></a></div>
            </div>
        </section>

        <section id="newsletter" class="py-20 md:py-32 bg-gradient-to-b from-[#111111] to-[#0a0a0a]">
            <div class="container mx-auto px-6 text-center max-w-3xl">
                <h2 class="text-4xl md:text-5xl font-bold mb-4 fade-in">Join the Collective.</h2>
                <p class="text-gray-400 text-lg md:text-xl mb-10 fade-in" style="transition-delay: 0.1s;">Tap in for early access, exclusive content, and mindset fuel. This is where the real conversation happens. No spam, promise.</p>
                <form class="max-w-md mx-auto fade-in" style="transition-delay: 0.2s;">
                    <div class="flex flex-col sm:flex-row gap-4">
                        <input id="newsletter-email" type="email" placeholder="Your email..." required class="flex-grow px-5 py-3 bg-gray-800 border border-gray-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-600 focus:border-transparent text-white placeholder-gray-500 transition duration-200">
                        <button type="submit" class="bg-purple-600 hover:bg-purple-700 text-white px-8 py-3 rounded-lg font-semibold uppercase tracking-wide btn-hover-effect transition duration-200">Join</button>
                    </div>
                </form>
            </div>
        </section>

        <section id="contact" class="py-20 md:py-32 bg-[#0a0a0a]">
            <div class="container mx-auto px-6 text-center">
                <h2 class="text-4xl md:text-5xl font-bold mb-6 fade-in">Connect</h2>
                <p class="text-gray-400 max-w-xl mx-auto mb-10 fade-in" style="transition-delay: 0.1s;">Got ideas? Questions? Collab dreams? Or just wanna share the vibe? Let's link.</p>
                <form class="max-w-lg mx-auto fade-in" style="transition-delay: 0.2s;">
                    <div class="mb-4"><input type="email" placeholder="Your Email" class="w-full px-4 py-3 bg-gray-800 border border-gray-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-600 focus:border-transparent text-white placeholder-gray-500"></div>
                    <div class="mb-4"><textarea placeholder="Your Message" rows="4" class="w-full px-4 py-3 bg-gray-800 border border-gray-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-600 focus:border-transparent text-white placeholder-gray-500"></textarea></div>
                    <button type="submit" class="bg-white text-black px-8 py-3 rounded-lg font-semibold uppercase tracking-wide btn-hover-effect w-full sm:w-auto">Send It</button>
                </form>
            </div>
        </section>

        <footer class="py-10 bg-black">
            <div class="container mx-auto px-6 text-center text-gray-500">
                 <div class="mb-4">
                    <button onclick="openModal('sizeGuideModal')" class="text-gray-400 hover:text-white text-sm underline">Size Guide</button>
                    <span class="mx-2 text-gray-600">|</span>
                    <a href="admin.html" class="text-gray-400 hover:text-white text-sm underline">Admin Access</a>
                 </div>
                <p>&copy; <span id="current-year"></span> Triumind Collective. Stay True.</p>
                <div class="mt-4 space-x-6">
                    <a href="#" class="hover:text-gray-300">Instagram</a> <a href="#" class="hover:text-gray-300">Twitter</a> <a href="#" class="hover:text-gray-300">TikTok</a>
                </div>
            </div>
        </footer>
    </div> <div id="full-site-countdown-overlay" class="hidden">
        <div class="brand-logo text-glow">TRIUMIND</div>
        <p class="takeover-message">The Next Evolution is Approaching. Prepare Yourself.</p>
        <div class="countdown-timer-large">
            <div class="countdown-item-large"><div id="takeover-days" class="countdown-number-large">00</div><div class="countdown-label-large">Days</div></div>
            <div class="countdown-item-large"><div id="takeover-hours" class="countdown-number-large">00</div><div class="countdown-label-large">Hours</div></div>
            <div class="countdown-item-large"><div id="takeover-minutes" class="countdown-number-large">00</div><div class="countdown-label-large">Mins</div></div>
            <div class="countdown-item-large"><div id="takeover-seconds" class="countdown-number-large">00</div><div class="countdown-label-large">Secs</div></div>
        </div>
        <div id="takeover-drop-live-message" class="drop-live-message hidden">The Portal is Open!</div>
    </div>

    <div id="sizeGuideModal" class="modal">
      <div class="modal-content fade-in">
        <span class="close-button" onclick="closeModal('sizeGuideModal')">&times;</span>
        <h3 class="text-2xl font-semibold mb-4">Size Guide (Example)</h3>
        <p class="text-gray-400 mb-4">Find your fit. Measurements are approximate.</p>
        <table class="size-table">
          <thead><tr><th>Size</th><th>Chest (in)</th><th>Length (in)</th><th>Sleeve (in)</th></tr></thead>
          <tbody>
            <tr><td>S</td><td>36-38</td><td>27</td><td>8</td></tr><tr><td>M</td><td>39-41</td><td>28</td><td>8.5</td></tr>
            <tr><td>L</td><td>42-44</td><td>29</td><td>9</td></tr><tr><td>XL</td><td>45-48</td><td>30</td><td>9.5</td></tr>
            <tr><td>XXL</td><td>49-52</td><td>31</td><td>10</td></tr>
          </tbody>
        </table>
         <p class="text-gray-400 mt-4 text-sm">Hoodies & Cargos may have different sizing. Check specific product details if available.</p>
      </div>
    </div>

    <div id="cart-overlay"></div> <div id="cart-modal"> <div class="cart-header">
            <h2>Your Cart</h2>
            <button id="cart-close-button" class="cart-close-button">&times;</button>
        </div>
        <div id="cart-body" class="cart-body">
            </div>
        <div class="cart-footer">
            <div id="cart-total-container" class="cart-total hidden">
                <span>Total:</span>
                <span id="cart-total-price">$0.00</span>
            </div>
            <button id="cart-checkout-button" class="cart-checkout-button btn-hover-effect hidden">Complete Payment</button>
        </div>
    </div>

    <div id="toast-notification" class="toast-notification">Item added to cart!</div>


    <script>
        const spotlightHeading = document.getElementById('spotlight-heading');
        const customCursorEl = document.getElementById('custom-cursor');
        const heroSection = document.getElementById('hero');
        const heroBlobs = document.querySelectorAll('.hero-blob');
        const mobileMenuButton = document.getElementById('mobile-menu-button');
        const mobileMenu = document.getElementById('mobile-menu');
        const siteHeader = document.getElementById('header');
        const mainSiteContentWrapper = document.getElementById('main-site-content-wrapper');
        const fullSiteCountdownOverlay = document.getElementById('full-site-countdown-overlay');
        let mainCountdownInterval;

        // Cart Elements
        const cartOverlay = document.getElementById('cart-overlay'); // New overlay element
        const cartModal = document.getElementById('cart-modal');
        const cartIconContainer = document.getElementById('cart-icon-container');
        const mobileCartIconContainer = document.getElementById('mobile-cart-icon-container');
        const cartCloseButton = document.getElementById('cart-close-button');
        const cartBody = document.getElementById('cart-body');
        const cartTotalPriceEl = document.getElementById('cart-total-price');
        const cartItemCountBadge = document.getElementById('cart-item-count-badge');
        const mobileCartItemCountBadge = document.getElementById('mobile-cart-item-count-badge');
        const cartTotalContainer = document.getElementById('cart-total-container');
        const cartCheckoutButton = document.getElementById('cart-checkout-button');
        const toastNotification = document.getElementById('toast-notification');

        let cartItems = []; // Array to store cart items

        // --- Toast Notification Function ---
        function showToast(message) {
            if (!toastNotification) return;
            toastNotification.textContent = message;
            toastNotification.classList.add('show');
            setTimeout(() => {
                toastNotification.classList.remove('show');
            }, 2000); // Hide after 2 seconds
        }

        // --- Cart Logic ---
        function openCart() {
            if (cartModal && cartOverlay) {
                cartOverlay.classList.add('open'); // Show overlay
                cartModal.classList.add('open');   // Show modal
                document.body.classList.add('cart-open');
            }
        }

        function closeCart() {
            if (cartModal && cartOverlay) {
                cartOverlay.classList.remove('open'); // Hide overlay
                cartModal.classList.remove('open');   // Hide modal
                document.body.classList.remove('cart-open');
            }
        }

        function loadCartFromStorage() {
            const storedCart = localStorage.getItem('triumindCart');
            if (storedCart) {
                cartItems = JSON.parse(storedCart);
            }
            renderCart();
        }

        function saveCartToStorage() {
            localStorage.setItem('triumindCart', JSON.stringify(cartItems));
        }

        function addToCart(productId, productName, productPrice, productImage) {
            const existingItemIndex = cartItems.findIndex(item => item.id === productId);
            if (existingItemIndex > -1) {
                cartItems[existingItemIndex].quantity += 1;
            } else {
                cartItems.push({
                    id: productId,
                    name: productName,
                    price: parseFloat(productPrice),
                    image: productImage,
                    quantity: 1
                });
            }
            saveCartToStorage();
            renderCart();
            showToast(`${productName} added to cart!`);
            // Removed openCart(); from here to prevent automatic opening
        }

        function updateCartItemQuantity(productId, newQuantity) {
            const itemIndex = cartItems.findIndex(item => item.id === productId);
            if (itemIndex > -1) {
                if (newQuantity <= 0) {
                    cartItems.splice(itemIndex, 1); // Remove item if quantity is 0 or less
                } else {
                    cartItems[itemIndex].quantity = newQuantity;
                }
                saveCartToStorage();
                renderCart();
            }
        }

        function removeFromCart(productId) {
            cartItems = cartItems.filter(item => item.id !== productId);
            saveCartToStorage();
            renderCart();
            showToast(`Item removed from cart.`);
        }

        function renderCart() {
            if (!cartBody || !cartTotalPriceEl || !cartItemCountBadge || !mobileCartItemCountBadge || !cartTotalContainer || !cartCheckoutButton) {
                console.error("One or more cart elements are missing from the DOM.");
                return;
            }

            cartBody.innerHTML = ''; // Clear previous items

            if (cartItems.length === 0) {
                cartBody.innerHTML = '<p class="empty-cart-message">Your cart is currently empty. Go find some gear!</p>';
                cartTotalContainer.classList.add('hidden');
                cartCheckoutButton.classList.add('hidden');
            } else {
                cartTotalContainer.classList.remove('hidden');
                cartCheckoutButton.classList.remove('hidden');
                cartItems.forEach(item => {
                    const itemElement = document.createElement('div');
                    itemElement.classList.add('cart-item');
                    itemElement.innerHTML = `
                        <img src="${item.image || 'https://placehold.co/70x90/1a1a1a/cccccc?text=N/A'}" alt="${item.name}" class="cart-item-image" onerror="this.onerror=null;this.src='https://placehold.co/70x90/1a1a1a/cccccc?text=Error';">
                        <div class="cart-item-details">
                            <h3 class="cart-item-name">${item.name}</h3>
                            <p class="cart-item-price">$${item.price.toFixed(2)}</p>
                            <div class="cart-item-quantity">
                                <button class="quantity-decrease btn-hover-effect" data-id="${item.id}">-</button>
                                <span class="mx-2">${item.quantity}</span>
                                <button class="quantity-increase btn-hover-effect" data-id="${item.id}">+</button>
                            </div>
                        </div>
                        <div class="cart-item-remove">
                            <button class="remove-item-btn btn-hover-effect" data-id="${item.id}">Remove</button>
                        </div>
                    `;
                    cartBody.appendChild(itemElement);
                });
            }

            // Calculate total price
            const totalPrice = cartItems.reduce((total, item) => total + (item.price * item.quantity), 0);
            cartTotalPriceEl.textContent = `$${totalPrice.toFixed(2)}`;

            // Update cart item count badge
            const totalQuantity = cartItems.reduce((total, item) => total + item.quantity, 0);
            if (totalQuantity > 0) {
                cartItemCountBadge.textContent = totalQuantity;
                cartItemCountBadge.classList.remove('hidden');
                mobileCartItemCountBadge.textContent = totalQuantity;
                mobileCartItemCountBadge.classList.remove('hidden');
            } else {
                cartItemCountBadge.classList.add('hidden');
                mobileCartItemCountBadge.classList.add('hidden');
            }

            // Add event listeners for new cart item buttons
            document.querySelectorAll('.quantity-decrease').forEach(button => {
                button.addEventListener('click', (e) => {
                    const productId = e.target.dataset.id;
                    const item = cartItems.find(i => i.id === productId);
                    if (item) updateCartItemQuantity(productId, item.quantity - 1);
                });
            });
            document.querySelectorAll('.quantity-increase').forEach(button => {
                button.addEventListener('click', (e) => {
                    const productId = e.target.dataset.id;
                    const item = cartItems.find(i => i.id === productId);
                    if (item) updateCartItemQuantity(productId, item.quantity + 1);
                });
            });
            document.querySelectorAll('.remove-item-btn').forEach(button => {
                button.addEventListener('click', (e) => {
                    removeFromCart(e.target.dataset.id);
                });
            });
        }


        // --- Section Visibility ---
        function applySectionVisibility() {
            const settings = JSON.parse(localStorage.getItem('triumindSectionVisibility')) || {};
            const sectionMap = {
                countdownVisible: document.getElementById('countdown'),
                gearVisible: document.getElementById('gear'),
                storiesVisible: document.getElementById('stories'),
                reviewsVisible: document.getElementById('reviews'),
                newsletterVisible: document.getElementById('newsletter'),
                contactVisible: document.getElementById('contact')
            };

            for (const key in sectionMap) {
                const sectionElement = sectionMap[key];
                if (sectionElement) {
                    const shouldBeVisible = settings[key] !== undefined ? settings[key] : true;
                    if (shouldBeVisible) {
                        sectionElement.classList.remove('hidden');
                    } else {
                        sectionElement.classList.add('hidden');
                    }
                }
            }
        }

        // --- General Site Interactivity ---
        if (spotlightHeading) spotlightHeading.textContent = "Triumind";
        
        if (customCursorEl) {
            document.addEventListener('mousemove', (e) => {
                 if (document.body.classList.contains('site-takeover-active') || document.body.classList.contains('cart-open')) {
                     customCursorEl.style.opacity = '0'; return;
                 }
                 customCursorEl.style.opacity = '1';
                 requestAnimationFrame(() => { customCursorEl.style.transform = `translate(${e.clientX}px, ${e.clientY}px) translate(-50%, -50%)`; });
            });
        } 

        if (heroSection && spotlightHeading && heroBlobs.length > 0) {
            heroSection.addEventListener('mousemove', (e) => {
                requestAnimationFrame(() => {
                    const spotlightRect = spotlightHeading.getBoundingClientRect();
                    spotlightHeading.style.setProperty('--x', `${e.clientX - spotlightRect.left}px`);
                    spotlightHeading.style.setProperty('--y', `${e.clientY - spotlightRect.top}px`);
                    const heroRect = heroSection.getBoundingClientRect();
                    const moveX = (e.clientX - heroRect.left - heroRect.width / 2) * 0.02;
                    const moveY = (e.clientY - heroRect.top - heroRect.height / 2) * 0.02;
                    heroBlobs.forEach(blob => blob.style.transform = `translate(${moveX}px, ${moveY}px)`);
                });
            });
             heroSection.addEventListener('mouseleave', () => {
                 requestAnimationFrame(() => {
                     spotlightHeading.style.setProperty('--x', `50%`);
                     spotlightHeading.style.setProperty('--y', `50%`);
                     heroBlobs.forEach(blob => blob.style.transform = `translate(0px, 0px)`);
                 });
             });
        }

        const fadeInElements = document.querySelectorAll('.fade-in');
        if (fadeInElements.length > 0) {
            const fadeInObserver = new IntersectionObserver((entries) => {
                entries.forEach(entry => { if (entry.isIntersecting) entry.target.classList.add('visible'); });
            }, { threshold: 0.1 });
            fadeInElements.forEach(el => fadeInObserver.observe(el));
        }

        if (mobileMenuButton && mobileMenu && siteHeader) {
            mobileMenuButton.addEventListener('click', () => {
                const isHidden = mobileMenu.classList.toggle('hidden');
                siteHeader.style.borderRadius = !isHidden ? '1.5rem 1.5rem 0 0' : '9999px';
                if(!isHidden) mobileMenu.style.backgroundColor = getComputedStyle(siteHeader).backgroundColor;
            });
            mobileMenu.querySelectorAll('a').forEach(link => {
                link.addEventListener('click', () => { mobileMenu.classList.add('hidden'); siteHeader.style.borderRadius = '9999px'; });
            });
        }

        // --- Countdown Logic ---
        function updateCountdownDisplay(targetTimestamp, elements, liveMessageElement) {
            const now = new Date().getTime();
            const distance = targetTimestamp - now;
            
            if (!elements.days || !elements.hours || !elements.minutes || !elements.seconds) {
                console.error("CRITICAL: One or more countdown digit elements are NULL. Cannot update display.", elements);
                if(mainCountdownInterval) clearInterval(mainCountdownInterval); 
                mainCountdownInterval = null;
                return true; // Indicate finished or error
            }
            
            if (distance < 0) {
                if(mainCountdownInterval) clearInterval(mainCountdownInterval); 
                mainCountdownInterval = null;
                elements.days.textContent = '00'; elements.hours.textContent = '00';
                elements.minutes.textContent = '00'; elements.seconds.textContent = '00';
                
                if (elements.timerContainer) elements.timerContainer.classList.add('hidden');
                if (liveMessageElement) liveMessageElement.classList.remove('hidden');
                return true; // Indicate finished
            } else { // Countdown is active
                if (elements.timerContainer) elements.timerContainer.classList.remove('hidden');
                if (liveMessageElement) liveMessageElement.classList.add('hidden');

                elements.days.textContent = String(Math.floor(distance / (1000 * 60 * 60 * 24))).padStart(2, '0');
                elements.hours.textContent = String(Math.floor((distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60))).padStart(2, '0');
                elements.minutes.textContent = String(Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60))).padStart(2, '0');
                elements.seconds.textContent = String(Math.floor((distance % (1000 * 60)) / 1000)).padStart(2, '0');
            }
            return false; // Indicate still running
        }

        function startMainSiteCountdown() {
            if (mainCountdownInterval) {
                clearInterval(mainCountdownInterval);
                mainCountdownInterval = null;
            }

            const rawTargetTimestamp = localStorage.getItem('triumindCountdownTarget');
            const targetTimestamp = parseInt(rawTargetTimestamp);
            const countdownMode = localStorage.getItem('triumindCountdownMode') || 'section';

            const sectionElements = {
                days: document.getElementById('days'), hours: document.getElementById('hours'),
                minutes: document.getElementById('minutes'), seconds: document.getElementById('seconds'),
                timerContainer: document.getElementById('countdown-timer')
            };
            const sectionLiveMessageEl = document.getElementById('section-drop-live-message');
            
            const takeoverElements = {
                days: document.getElementById('takeover-days'), hours: document.getElementById('takeover-hours'),
                minutes: document.getElementById('takeover-minutes'), seconds: document.getElementById('takeover-seconds'),
                timerContainer: fullSiteCountdownOverlay ? fullSiteCountdownOverlay.querySelector('.countdown-timer-large') : null
            };
            const takeoverLiveMessageEl = document.getElementById('takeover-drop-live-message');

            let activateTakeover = false;
            if (countdownMode === 'takeover' && targetTimestamp && !isNaN(targetTimestamp)) {
                if (takeoverElements.days && takeoverElements.hours && takeoverElements.minutes && takeoverElements.seconds && takeoverElements.timerContainer) {
                    activateTakeover = true;
                } else {
                    console.error("CRITICAL: One or more TAKEOVER countdown elements NOT FOUND. Cannot display takeover.", takeoverElements);
                }
            }

            if (activateTakeover && fullSiteCountdownOverlay) {
                const isFinishedInitially = updateCountdownDisplay(targetTimestamp, takeoverElements, takeoverLiveMessageEl);
                if (!isFinishedInitially) { 
                    fullSiteCountdownOverlay.classList.remove('hidden'); 
                    fullSiteCountdownOverlay.classList.add('visible');   
                    document.body.classList.add('site-takeover-active');
                    if (mainSiteContentWrapper) mainSiteContentWrapper.style.opacity = '0';
                    if (siteHeader) siteHeader.style.opacity = '0';
                    if (customCursorEl) customCursorEl.style.opacity = '0';
                    
                    mainCountdownInterval = setInterval(() => {
                        if (updateCountdownDisplay(targetTimestamp, takeoverElements, takeoverLiveMessageEl)) {
                            setTimeout(() => {
                                document.body.classList.remove('site-takeover-active');
                                if (fullSiteCountdownOverlay) {
                                    fullSiteCountdownOverlay.classList.add('hidden');
                                    fullSiteCountdownOverlay.classList.remove('visible');
                                }
                                if (mainSiteContentWrapper) mainSiteContentWrapper.style.opacity = '1';
                                if (siteHeader) siteHeader.style.opacity = '1';
                                if (customCursorEl) customCursorEl.style.opacity = '1';
                                localStorage.removeItem('triumindCountdownTarget');
                                localStorage.removeItem('triumindCountdownMode');
                            }, 5 * 60 * 1000); 
                        }
                    }, 1000);
                } else {
                    activateTakeover = false; 
                    if (new Date(targetTimestamp).getTime() < Date.now()) {
                        localStorage.removeItem('triumindCountdownTarget');
                        localStorage.removeItem('triumindCountdownMode');
                    }
                }
            }
            
            if (!activateTakeover) {
                if (fullSiteCountdownOverlay) { 
                    fullSiteCountdownOverlay.classList.add('hidden');
                    fullSiteCountdownOverlay.classList.remove('visible');
                }
                document.body.classList.remove('site-takeover-active'); 
                if (mainSiteContentWrapper) mainSiteContentWrapper.style.opacity = '1';
                if (siteHeader) siteHeader.style.opacity = '1';
                if (customCursorEl) customCursorEl.style.opacity = '1';

                if (targetTimestamp && !isNaN(targetTimestamp)) {
                    if (sectionElements.days && sectionElements.hours && sectionElements.minutes && sectionElements.seconds) {
                         if (!updateCountdownDisplay(targetTimestamp, sectionElements, sectionLiveMessageEl)) {
                            mainCountdownInterval = setInterval(() => {
                                if(updateCountdownDisplay(targetTimestamp, sectionElements, sectionLiveMessageEl)){
                                    localStorage.removeItem('triumindCountdownTarget');
                                    localStorage.removeItem('triumindCountdownMode');
                                }
                            }, 1000);
                         } else {
                             if (new Date(targetTimestamp).getTime() < Date.now()) {
                                localStorage.removeItem('triumindCountdownTarget');
                                localStorage.removeItem('triumindCountdownMode');
                            }
                         }
                    } else {
                        console.error("Section countdown elements not found!");
                    }
                } else { 
                    const countdownTimerSection = document.getElementById('countdown-timer');
                    if (sectionLiveMessageEl) sectionLiveMessageEl.classList.add('hidden');
                    if (countdownTimerSection) countdownTimerSection.classList.remove('hidden');
                    ['days', 'hours', 'minutes', 'seconds'].forEach(id => { const el = document.getElementById(id); if (el) el.textContent = '00'; });
                }
            }
        }


        // --- Modals & Product Rendering ---
        function openModal(modalId) { const modal = document.getElementById(modalId); if (modal) modal.style.display = "block"; }
        function closeModal(modalId) { const modal = document.getElementById(modalId); if (modal) modal.style.display = "none"; }
        window.addEventListener('click', (event) => { document.querySelectorAll('.modal').forEach(modal => { if (event.target == modal) modal.style.display = "none"; }); });
        
        function renderProducts() {
            const productGrid = document.getElementById('product-grid');
            const noProductsMessageStorefront = document.getElementById('no-products-storefront');
            if (!productGrid || !noProductsMessageStorefront) {
                console.error("Product grid or no-products message element not found in storefront.");
                return;
            }
            let products = [];
            try {
                products = JSON.parse(localStorage.getItem('triumindProducts')) || [];
            } catch (e) { console.error("Error parsing products from localStorage:", e); products = []; }
            
            const activeProducts = products.filter(product => product && product.status === 'Active');
            productGrid.innerHTML = ''; 

            if (activeProducts.length === 0) {
                noProductsMessageStorefront.classList.remove('hidden');
                productGrid.classList.add('hidden');
            } else {
                noProductsMessageStorefront.classList.add('hidden');
                productGrid.classList.remove('hidden');
                activeProducts.forEach(product => {
                    let imageUrl = 'https://placehold.co/600x700/111111/ffffff?text=Image+Coming'; 
                    if (product.images && Array.isArray(product.images) && product.images.length > 0) {
                        const primaryImage = product.images.find(img => img && img.isPrimary === true);
                        if (primaryImage && primaryImage.dataUrl) { imageUrl = primaryImage.dataUrl; }
                        else if (product.images[0] && product.images[0].dataUrl) { imageUrl = product.images[0].dataUrl; }
                    }
                    const productCardHTML = `
                        <div class="bg-gray-900 rounded-lg overflow-hidden shadow-xl flex flex-col fade-in">
                            <img src="${imageUrl}" alt="${product.name || 'Product Image'}" class="w-full h-auto object-cover img-hover-effect aspect-[6/7]" onerror="this.onerror=null;this.src='https://placehold.co/600x700/1a1a1a/cccccc?text=Image+Not+Found';">
                            <div class="p-6 flex flex-col flex-grow">
                                <h3 class="text-xl font-semibold mb-2">${product.name || 'Unnamed Product'}</h3>
                                <p class="text-gray-400 mb-4 flex-grow">${product.description || 'No description available.'}</p>
                                <div class="flex justify-between items-center mt-4">
                                    <span class="text-lg font-bold text-white">$${parseFloat(product.price || 0).toFixed(2)}</span>
                                    <button class="add-to-cart-btn bg-purple-600 hover:bg-purple-700 text-white px-4 py-2 rounded-md text-sm font-medium btn-hover-effect"
                                            data-product-id="${product.id}"
                                            data-product-name="${product.name || 'Unnamed Product'}"
                                            data-product-price="${parseFloat(product.price || 0).toFixed(2)}"
                                            data-product-image="${imageUrl}">
                                        Add to Cart
                                    </button>
                                </div>
                                 <button onclick="openModal('sizeGuideModal')" class="text-sm text-gray-400 hover:text-white mt-3 text-left self-start">Size Guide</button>
                            </div>
                        </div>
                    `;
                    productGrid.innerHTML += productCardHTML;
                });

                // Add event listeners to NEWLY created "Add to Cart" buttons
                document.querySelectorAll('.add-to-cart-btn').forEach(button => {
                    button.addEventListener('click', (e) => {
                        const { productId, productName, productPrice, productImage } = e.target.dataset;
                        addToCart(productId, productName, productPrice, productImage);
                    });
                });

                const newFadeInElements = productGrid.querySelectorAll('.fade-in');
                 if (newFadeInElements.length > 0) {
                    const fadeInObserver = new IntersectionObserver((entries) => {
                        entries.forEach(entry => { if (entry.isIntersecting) entry.target.classList.add('visible'); });
                    }, { threshold: 0.1 });
                    newFadeInElements.forEach(el => fadeInObserver.observe(el));
                }
            }
        }

        // --- DOMContentLoaded & Storage Event Listener ---
        document.addEventListener('DOMContentLoaded', () => {
            applySectionVisibility(); 
            startMainSiteCountdown(); 
            renderProducts(); 
            loadCartFromStorage(); // Load cart from localStorage

            const currentYearEl = document.getElementById('current-year');
            if (currentYearEl) currentYearEl.textContent = new Date().getFullYear();

            // Cart Event Listeners
            if (cartIconContainer) cartIconContainer.addEventListener('click', openCart);
            if (mobileCartIconContainer) mobileCartIconContainer.addEventListener('click', openCart);
            if (cartCloseButton) cartCloseButton.addEventListener('click', closeCart);
            if (cartOverlay) cartOverlay.addEventListener('click', closeCart); // Close cart if overlay is clicked

            if (cartCheckoutButton) {
                cartCheckoutButton.addEventListener('click', () => {
                    if (cartItems.length > 0) {
                        showToast('Proceeding to checkout (simulation)...');
                        // In a real scenario, you'd redirect to a checkout page or integrate a payment gateway.
                        // For now, let's clear the cart as a simulation of successful checkout.
                        setTimeout(() => {
                            cartItems = [];
                            saveCartToStorage();
                            renderCart();
                            closeCart();
                            showToast('Order placed (simulation)! Thank you.');
                        }, 1500);
                    } else {
                        showToast('Your cart is empty.');
                    }
                });
            }


            window.addEventListener('storage', (event) => {
                if (event.key === 'triumindProducts') { renderProducts(); }
                if (event.key === 'triumindCountdownTarget' || event.key === 'triumindCountdownMode') { startMainSiteCountdown(); } 
                if (event.key === 'triumindSectionVisibility') { applySectionVisibility(); }
                if (event.key === 'triumindCart') { loadCartFromStorage(); } // Reload cart if changed in another tab
            });

            // Close cart with Escape key
            document.addEventListener('keydown', (event) => {
                if (event.key === 'Escape' && document.body.classList.contains('cart-open')) {
                    closeCart();
                }
            });
        });
    </script>
</body>
</html>
