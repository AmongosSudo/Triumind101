<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Triumind Collective - Level Up Your Mindset</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" xintegrity="sha512-iecdLmaskl7CVkqkXNQ/ZH/XLlvWZOJyj7Yy7tcenmpD1ypASozpmT/E0iPtmFIB46ZmdtAc9eNBvH0H/ZpiBw==" crossorigin="anonymous" referrerpolicy="no-referrer" />

    <style>
        /* --- Main Website Styles --- */
        body {
            font-family: 'Inter', sans-serif;
            background-color: #0a0a0a;
            color: #f0f0f0;
            overflow-x: hidden;
            cursor: none; 
        }
        body.site-takeover-active, body.modal-open { 
            overflow: hidden;
        }

        #custom-cursor {
            position: fixed;
            left: 0; top: 0; width: 20px; height: 20px;
            border: 2px solid rgba(255, 255, 255, 0.7);
            border-radius: 50%; pointer-events: none;
            transform: translate(-50%, -50%); z-index: 10001; 
            transition: width 0.2s ease, height 0.2s ease, border-color 0.2s ease, box-shadow 0.2s ease, transform 0.05s linear, opacity 0.2s ease;
            box-shadow: 0 0 15px 5px rgba(255, 255, 255, 0.5);
            opacity: 1; 
        }
        body:not(.site-takeover-active):not(.modal-open):has(a:hover, button:hover, input:hover, textarea:hover, .img-hover-effect:hover, .cart-icon-container:hover) #custom-cursor {
             width: 30px; height: 30px;
             border-color: rgba(255, 255, 255, 1);
             box-shadow: 0 0 20px 8px rgba(255, 255, 255, 0.7);
        }
        body.site-takeover-active #custom-cursor { 
            opacity: 0 !important; 
        }
        body.modal-open:not(.site-takeover-active) #custom-cursor {
            opacity: 1 !important;
        }


        #header {
            position: fixed; top: 1rem; left: 50%;
            transform: translateX(-50%); width: calc(100% - 2rem); max-width: 1100px;
            z-index: 50; background-color: rgba(40, 40, 40, 0.8);
            backdrop-filter: blur(10px); -webkit-backdrop-filter: blur(10px);
            border-radius: 9999px; box-shadow: 0 5px 15px rgba(0, 0, 0, 0.4);
            transition: top 0.3s ease, background-color 0.3s ease, opacity 0.5s ease;
            padding: 0.5rem 0;
        }
        body.site-takeover-active #header {
            opacity: 0; pointer-events: none;
        }


        .contact-button {
            background-color: #1a1a1a; color: #f0f0f0; padding: 0.5rem 1.25rem;
            border-radius: 9999px; font-weight: 500; transition: background-color 0.2s ease, color 0.2s ease;
            display: inline-flex; align-items: center;
        }
        .contact-button:hover { background-color: #383838; color: #ffffff; }
        .contact-button i { margin-left: 0.5rem; }

        .spotlight-text {
            position: relative;
            background: radial-gradient(circle 200px at var(--x, 50%) var(--y, 50%), rgba(255, 255, 255, 0.8), rgba(255, 255, 255, 0.1));
            background-clip: text; -webkit-background-clip: text; color: transparent;
            transition: background 0.05s linear;
        }
        .hero-blob { transition: transform 1.5s cubic-bezier(0.175, 0.885, 0.32, 1.275); }

        .fade-in { opacity: 0; transform: translateY(20px); transition: opacity 0.8s ease-out, transform 0.8s ease-out; }
        .fade-in.visible { opacity: 1; transform: translateY(0); }

        html { scroll-behavior: smooth; }

        body:not(.site-takeover-active):not(.modal-open) ::-webkit-scrollbar { width: 8px; }
        body:not(.site-takeover-active):not(.modal-open) ::-webkit-scrollbar-track { background: #1a1a1a; }
        body:not(.site-takeover-active):not(.modal-open) ::-webkit-scrollbar-thumb { background: #4a4a4a; border-radius: 4px; }
        body:not(.site-takeover-active):not(.modal-open) ::-webkit-scrollbar-thumb:hover { background: #6a6a6a; }

        .btn-hover-effect { transition: transform 0.3s ease, box-shadow 0.3s ease; cursor: none; position: relative; z-index: 1; }
        .btn-hover-effect:hover { transform: translateY(-3px); box-shadow: 0 10px 20px rgba(0, 0, 0, 0.4); }
        
        .view-product-link {
            display: inline-block;
            background-color: rgb(134, 48, 221); 
            color: white;
            padding: 0.5rem 1rem; 
            border-radius: 0.375rem; 
            font-size: 0.875rem; 
            font-weight: 500; 
            text-decoration: none;
            transition: background-color 0.2s ease, transform 0.2s ease, box-shadow 0.2s ease;
        }
        .view-product-link:hover {
            background-color: rgb(107, 29, 185); 
            transform: translateY(-2px);
            box-shadow: 0 4px 10px rgba(2, 132, 199, 0.4);
        }


        .img-hover-effect { transition: transform 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94), filter 0.4s ease; filter: grayscale(50%); cursor: none; }
        .img-hover-effect:hover { transform: scale(1.05); filter: grayscale(0%); }

        #newsletter-email:focus, #cart-customer-email:focus { border-color: #a855f7; box-shadow: 0 0 0 2px rgba(168, 85, 247, 0.5); }

        .countdown-item { background-color: rgba(255, 255, 255, 0.05); padding: 0.75rem 1rem; border-radius: 0.5rem; min-width: 70px; }
        .countdown-number { font-size: 2rem; font-weight: 700; line-height: 1; color: #f0f0f0; }
        .countdown-label { font-size: 0.75rem; text-transform: uppercase; letter-spacing: 0.05em; color: #a0a0a0; }

        .review-card { background-color: #1a1a1a; border: 1px solid #333; border-radius: 0.75rem; padding: 1.5rem; text-align: left; }
        .review-stars { color: #eab308; }

        .modal { display: none; position: fixed; z-index: 10000; left: 0; top: 0; width: 100%; height: 100%; overflow: auto; background-color: rgba(0,0,0,0.7); backdrop-filter: blur(5px); -webkit-backdrop-filter: blur(5px); }
        .modal-content { background-color: #1f1f1f; color: #f0f0f0; margin: 10% auto; padding: 2rem; border: 1px solid #444; border-radius: 0.75rem; width: 90%; max-width: 600px; position: relative; box-shadow: 0 10px 30px rgba(0,0,0,0.5); }
        .close-button { color: #aaa; position: absolute; top: 1rem; right: 1.5rem; font-size: 2rem; font-weight: bold; line-height: 1; }
        .close-button:hover, .close-button:focus { color: #fff; text-decoration: none; cursor: pointer; }
        .size-table { width: 100%; border-collapse: collapse; margin-top: 1rem; }
        .size-table th, .size-table td { border: 1px solid #444; padding: 0.75rem; text-align: center; }
        .size-table th { background-color: #333; font-weight: bold; }

        a, button, input, textarea, .cart-icon-container { cursor: none; position: relative; z-index: 1; }
        input[type="email"], textarea { caret-color: white; }

        @keyframes blob { 0%, 100% { transform: translate(0, 0) scale(1); } 33% { transform: translate(30px, -50px) scale(1.1); } 66% { transform: translate(-20px, 20px) scale(0.9); } }
        .animate-blob { animation: blob 10s infinite ease-in-out; }
        .animation-delay-2000 { animation-delay: 2s; }
        .animation-delay-4000 { animation-delay: 4s; }

        #main-site-content-wrapper { transition: opacity 0.4s ease, filter 0.4s ease, transform 0.4s ease; }
        body.site-takeover-active #main-site-content-wrapper { opacity: 0; pointer-events: none; }
        body.modal-open #main-site-content-wrapper { 
            filter: blur(8px);
            transform: scale(0.98);
            opacity: 0.6;
            pointer-events: none;
        }


        #full-site-countdown-overlay {
            position: fixed; inset: 0; background-color: #0a0a0a;
            z-index: 20000; display: flex; flex-direction: column;
            align-items: center; justify-content: center; color: #f0f0f0;
            opacity: 0; pointer-events: none; transition: opacity 0.5s ease-in-out;
        }
        #full-site-countdown-overlay.visible { opacity: 1; pointer-events: auto; }
        #full-site-countdown-overlay .brand-logo { font-size: 3rem; font-weight: 900; text-transform: uppercase; letter-spacing: -0.025em; margin-bottom: 1rem; }
        #full-site-countdown-overlay .takeover-message { font-size: 1.5rem; margin-bottom: 2rem; color: #a0a0a0; max-width: 600px; text-align: center; }
        #full-site-countdown-overlay .countdown-timer-large { display: flex; gap: 1.5rem; }
        #full-site-countdown-overlay .countdown-item-large { background-color: rgba(255, 255, 255, 0.08); padding: 1.5rem 2rem; border-radius: 0.75rem; text-align: center; min-width: 120px; }
        #full-site-countdown-overlay .countdown-number-large { font-size: 4rem; font-weight: 700; line-height: 1; }
        #full-site-countdown-overlay .countdown-label-large { font-size: 1rem; text-transform: uppercase; letter-spacing: 0.05em; color: #a0a0a0; margin-top: 0.5rem; }
        #full-site-countdown-overlay .drop-live-message { font-size: 2.5rem; font-weight: bold; color: #8B5CF6; margin-top: 2rem; }
        
        .modal-overlay { 
            position: fixed;
            inset: 0;
            background-color: rgba(0,0,0,0.75); 
            z-index: 9990; 
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.4s ease;
            backdrop-filter: blur(5px); 
            -webkit-backdrop-filter: blur(5px);
        }
        .modal-overlay.open {
            opacity: 1;
            pointer-events: auto; 
        }

        #cart-modal {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%) scale(0.95); 
            width: 90%;
            max-width: 850px; 
            max-height: 85vh; 
            background-color: #16161d; 
            z-index: 9999; 
            box-shadow: 0 15px 40px rgba(0,0,0,0.6);
            border-radius: 0.75rem; 
            display: flex;
            flex-direction: column;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94), transform 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94);
            border: 1px solid rgba(255,255,255,0.1);
        }
        #cart-modal.open {
            opacity: 1;
            transform: translate(-50%, -50%) scale(1); 
            pointer-events: auto;
        }
        .cart-header {
            padding: 1.25rem 1.5rem; 
            border-bottom: 1px solid #2a2a3a; 
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .cart-header h2 {
            font-size: 1.375rem; 
            font-weight: 600;
            color: #e0e0e0; 
        }
        .cart-close-button {
            background: none;
            border: none;
            color: #9ca3af; 
            font-size: 1.75rem;
            line-height: 1;
            cursor: none;
            transition: color 0.2s ease;
        }
        .cart-close-button:hover {
            color: #f0f0f0;
        }
        .cart-body {
            flex-grow: 1;
            overflow-y: auto;
            padding: 1.5rem;
        }
        .cart-body::-webkit-scrollbar { width: 6px; }
        .cart-body::-webkit-scrollbar-track { background: #1f1f2b; border-radius: 3px;}
        .cart-body::-webkit-scrollbar-thumb { background: #4a4a5a; border-radius: 3px;}
        .cart-body::-webkit-scrollbar-thumb:hover { background: #6a6a7a; }

        .cart-item {
            display: flex;
            align-items: center;
            margin-bottom: 1.25rem;
            padding-bottom: 1.25rem;
            border-bottom: 1px solid #2a2a3a;
        }
        .cart-item:last-child {
            margin-bottom: 0;
            border-bottom: none;
        }
        .cart-item-image {
            width: 70px; 
            height: 90px;
            object-fit: cover;
            border-radius: 0.25rem; 
            margin-right: 1.25rem;
            border: 1px solid #333;
        }
        .cart-item-details {
            flex-grow: 1;
        }
        .cart-item-name {
            font-size: 0.95rem; 
            font-weight: 500;
            color: #e0e0e0;
            margin-bottom: 0.2rem;
        }
        .cart-item-price {
            font-size: 0.85rem;
            color: #9ca3af;
            margin-bottom: 0.4rem;
        }
         .cart-item-selected-options { font-size: 0.75rem; color: #888; margin-top: 0.3rem; }
        .cart-item-quantity {
            display: flex;
            align-items: center;
            font-size: 0.85rem;
        }
        .cart-item-quantity button {
            background-color: #2a2a3a;
            color: #e0e0e0;
            border: none;
            width: 22px;
            height: 22px;
            border-radius: 50%;
            font-weight: bold;
            margin: 0 0.4rem;
            transition: background-color 0.2s ease;
        }
        .cart-item-quantity button:hover {
            background-color: #3b3b4b;
        }
        .cart-item-remove button {
            background: none;
            border: none;
            color: #f87171; 
            font-size: 0.85rem;
            text-decoration: underline;
            transition: color 0.2s ease;
            padding: 0.25rem; 
        }
        .cart-item-remove button:hover {
            color: #ef4444;
        }
        .cart-footer {
            padding: 1.25rem 1.5rem;
            border-top: 1px solid #2a2a3a;
            background-color: #1f1f2b; 
            border-bottom-left-radius: 0.75rem; 
            border-bottom-right-radius: 0.75rem;
        }
        .cart-total {
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-size: 1.05rem; 
            font-weight: 600;
            margin-bottom: 0.875rem;
            color: #e0e0e0;
        }
        .cart-checkout-button {
            display: block;
            width: 100%;
            background-color: #8B5CF6;
            color: white;
            text-align: center;
            padding: 0.75rem 1rem; 
            border-radius: 0.375rem;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            transition: background-color 0.2s ease;
        }
        .cart-checkout-button:hover {
            background-color: #7c3aed;
        }
        .empty-cart-message {
            text-align: center;
            color: #9ca3af;
            font-size: 0.95rem;
            padding: 2rem 0;
        }
        .cart-icon-container { 
            position: relative;
            cursor: none;
            color: #d1d5db; 
            transition-property: color, background-color, border-color, text-decoration-color, fill, stroke, opacity, box-shadow, transform, filter, backdrop-filter;
            transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);
            transition-duration: 200ms;
        }
        .cart-icon-container:hover {
             color: #ffffff; 
        }
        .cart-item-count {
            position: absolute;
            top: -8px;
            right: -10px; 
            background-color: #8B5CF6;
            color: white;
            font-size: 0.7rem;
            font-weight: bold;
            width: 18px;
            height: 18px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            line-height: 1;
        }
        .toast-notification {
            position: fixed;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            background-color: #2a2a3a; 
            color: white;
            padding: 10px 20px;
            border-radius: 0.375rem;
            z-index: 10001; 
            opacity: 0;
            transition: opacity 0.3s ease, bottom 0.3s ease;
            font-size: 0.875rem;
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
        }
        .toast-notification.show {
            opacity: 1;
            bottom: 30px;
        }
    </style>
</head>
<body class="antialiased pt-24">
    <div id="custom-cursor"></div>

    <div id="modal-overlay" class="modal-overlay"></div>

    <div id="main-site-content-wrapper">
        <header id="header">
            <nav class="container mx-auto px-6 py-2 flex justify-between items-center">
                <a href="#hero" class="text-2xl font-bold text-white">TRIUMIND</a>
                <div class="space-x-6 hidden md:flex items-center">
                   <div id="cart-icon-container" class="cart-icon-container relative">
                        <i class="fas fa-shopping-cart text-xl"></i> <span id="cart-item-count-badge" class="cart-item-count hidden">0</span>
                    </div>
                </div>
                <div class="flex items-center md:hidden">
                     <div id="mobile-cart-icon-container" class="cart-icon-container relative mr-4">
                        <i class="fas fa-shopping-cart text-xl"></i> <span id="mobile-cart-item-count-badge" class="cart-item-count hidden">0</span>
                    </div>
                    <button id="mobile-menu-button" class="text-gray-300 hover:text-white focus:outline-none">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16m-7 6h7" /></svg>
                    </button>
                </div>
            </nav>
            <div id="mobile-menu" class="hidden md:hidden rounded-b-lg shadow-lg">
                 <a href="#hero" class="block px-6 py-3 text-gray-300 hover:bg-gray-700 hover:text-white transition duration-200">Start</a>
                 <a href="#gear" class="block px-6 py-3 text-gray-300 hover:bg-gray-700 hover:text-white transition duration-200">Gear</a>
                 <a href="#stories" class="block px-6 py-3 text-gray-300 hover:bg-gray-700 hover:text-white transition duration-200">Stories</a>
                 <a href="#reviews" class="block px-6 py-3 text-gray-300 hover:bg-gray-700 hover:text-white transition duration-200">Community</a>
                 <a href="#newsletter" class="block px-6 py-3 text-gray-300 hover:bg-gray-700 hover:text-white transition duration-200">Join</a>
                 <a href="#contact" class="block px-6 py-3 text-gray-300 hover:bg-gray-700 hover:text-white transition duration-200 contact-button w-full text-left justify-start">Connect <i class="fas fa-arrow-right ml-2"></i></a>
            </div>
        </header>

        <section id="hero" class="min-h-screen flex items-center justify-center relative overflow-hidden">
            <div class="absolute inset-0 z-0 opacity-10">
                 <div class="hero-blob absolute top-1/4 left-1/4 w-72 h-72 bg-purple-600 rounded-full filter blur-3xl animate-blob"></div>
                 <div class="hero-blob absolute bottom-1/4 right-1/4 w-72 h-72 bg-blue-600 rounded-full filter blur-3xl animate-blob animation-delay-2000"></div>
                 <div class="hero-blob absolute top-1/3 right-1/3 w-60 h-60 bg-pink-600 rounded-full filter blur-3xl animate-blob animation-delay-4000"></div>
            </div>
            <div class="text-center relative z-10 px-4">
                <h1 id="spotlight-heading" class="spotlight-text text-6xl sm:text-8xl md:text-9xl lg:text-[180px] font-black uppercase tracking-tighter leading-none">Triumind</h1>
                <p class="mt-4 text-lg md:text-xl text-gray-400 max-w-2xl mx-auto fade-in">
                    It's your climb. Your pace. Your mindset. We just make the gear for it. <span class="font-semibold text-white">Welcome to the collective.</span>
                </p>
                <a href="#gear" class="mt-8 inline-block bg-white text-black px-8 py-3 rounded-lg font-semibold uppercase tracking-wide btn-hover-effect fade-in" style="transition-delay: 0.2s;">Explore the Gear</a>
            </div>
            <div class="absolute bottom-10 left-1/2 transform -translate-x-1/2 z-10">
                <svg class="w-6 h-6 text-gray-500 animate-bounce" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 14l-7 7m0 0l-7-7m7 7V3"></path></svg>
            </div>
        </section>

        <section id="countdown" class="py-12 md:py-16 bg-[#111111]">
            <div class="container mx-auto px-6 text-center">
                <h3 id="section-countdown-title" class="text-2xl md:text-3xl font-semibold mb-3 fade-in">Next Drop Incoming...</h3>
                <p id="section-countdown-subtitle" class="text-gray-400 mb-8 fade-in" style="transition-delay: 0.1s;">Get ready. Something fresh is on the horizon.</p>
                <div id="countdown-timer" class="flex justify-center items-center space-x-2 sm:space-x-4 md:space-x-6 fade-in" style="transition-delay: 0.2s;">
                    <div class="countdown-item text-center"><div id="days" class="countdown-number">00</div><div class="countdown-label">Days</div></div>
                    <div class="countdown-item text-center"><div id="hours" class="countdown-number">00</div><div class="countdown-label">Hours</div></div>
                    <div class="countdown-item text-center"><div id="minutes" class="countdown-number">00</div><div class="countdown-label">Mins</div></div>
                    <div class="countdown-item text-center"><div id="seconds" class="countdown-number">00</div><div class="countdown-label">Secs</div></div>
                </div>
                 <div id="section-drop-live-message" class="hidden text-2xl md:text-3xl font-semibold mt-8 text-purple-400 fade-in">The Drop is LIVE!</div>
            </div>
        </section>

        <section id="gear" class="py-20 md:py-32 bg-gradient-to-b from-[#111111] to-[#0a0a0a]">
            <div class="container mx-auto px-6">
                <h2 class="text-4xl md:text-5xl font-bold text-center mb-4 fade-in">The Gear</h2>
                <p class="text-gray-400 text-center max-w-xl mx-auto mb-16 fade-in" style="transition-delay: 0.1s;">Rep the mindset. Gear designed for the process, built bold for your path.</p>
                <div id="product-grid" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-10">
                    </div>
                <div id="no-products-storefront" class="hidden text-center text-gray-400 py-10 fade-in">
                    <p class="text-2xl">Fresh gear is being forged...</p>
                    <p>Check back soon for the latest drops.</p>
                </div>
                <div class="text-center mt-16 fade-in" style="transition-delay: 0.5s;">
                     <a href="AllGear.html" class="bg-white text-black px-8 py-3 rounded-lg font-semibold uppercase tracking-wide btn-hover-effect">View All Gear (Archive)</a>
                </div>
            </div>
        </section>

        <section id="stories" class="py-20 md:py-32 bg-[#0a0a0a]">
             <div class="container mx-auto px-6 text-center">
                 <h2 class="text-4xl md:text-5xl font-bold text-center mb-6 fade-in">The Stories</h2>
                 <p class="text-gray-400 max-w-xl mx-auto mb-12 fade-in" style="transition-delay: 0.1s;">It's more than fabric. It's the mindset woven in. See how the Triumind collective lives it, breathes it, reps it.</p>
                 <div id="stories-grid" class="grid grid-cols-2 md:grid-cols-4 gap-4 fade-in" style="transition-delay: 0.2s;">
                    </div>
                 <p id="no-stories-message" class="text-gray-400 hidden">No stories to display yet. Check back soon!</p>
                 <div class="mt-12 fade-in" style="transition-delay: 0.3s;"><a href="#contact" class="text-purple-400 hover:text-purple-300 font-semibold group text-lg">Share Your Story? <span class="inline-block transition-transform duration-300 group-hover:translate-x-1">&rarr;</span></a></div>
            </div>
        </section>

        <section id="reviews" class="py-20 md:py-32 bg-[#111111]">
            <div class="container mx-auto px-6">
                <h2 class="text-4xl md:text-5xl font-bold text-center mb-6 fade-in">From the Collective</h2>
                <p class="text-gray-400 text-center max-w-xl mx-auto mb-16 fade-in" style="transition-delay: 0.1s;">Real talk from those on the journey. See what the community is saying.</p>
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
                    <div class="review-card fade-in" style="transition-delay: 0.2s;"><div class="flex items-center mb-3"><div class="review-stars">★★★★★</div><span class="ml-2 text-sm text-gray-400">- Alex R.</span></div><p class="text-gray-300 mb-2">"This hoodie is legit my go-to. Super comfy, feels premium, and lowkey reminds me to keep pushing."</p></div>
                    <div class="review-card fade-in" style="transition-delay: 0.3s;"><div class="flex items-center mb-3"><div class="review-stars">★★★★☆</div><span class="ml-2 text-sm text-gray-400">- Maya S.</span></div><p class="text-gray-300 mb-2">"Love the mindset behind Triumind. The cargo pants are sick, fit perfectly. Wish they had more colors tho!"</p></div>
                    <div class="review-card fade-in" style="transition-delay: 0.4s;"><div class="flex items-center mb-3"><div class="review-stars">★★★★★</div><span class="ml-2 text-sm text-gray-400">- Jay C.</span></div><p class="text-gray-300 mb-2">"Finally, a brand that gets it. Not about the hustle porn, just steady progress. The tee quality is fire too."</p></div>
                </div>
                 <div class="text-center mt-12 fade-in" style="transition-delay: 0.5s;"><a href="#" class="text-purple-400 hover:text-purple-300 font-semibold group text-lg">See All Reviews <span class="inline-block transition-transform duration-300 group-hover:translate-x-1">&rarr;</span></a></div>
            </div>
        </section>

        <section id="newsletter" class="py-20 md:py-32 bg-gradient-to-b from-[#111111] to-[#0a0a0a]">
            <div class="container mx-auto px-6 text-center max-w-3xl">
                <h2 class="text-4xl md:text-5xl font-bold mb-4 fade-in">Join the Collective.</h2>
                <p class="text-gray-400 text-lg md:text-xl mb-10 fade-in" style="transition-delay: 0.1s;">Tap in for early access, exclusive content, and mindset fuel. This is where the real conversation happens. No spam, promise.</p>
                <form class="max-w-md mx-auto fade-in" style="transition-delay: 0.2s;">
                    <div class="flex flex-col sm:flex-row gap-4">
                        <input id="newsletter-email" type="email" placeholder="Your email..." required class="flex-grow px-5 py-3 bg-gray-800 border border-gray-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-600 focus:border-transparent text-white placeholder-gray-500 transition duration-200">
                        <button type="submit" class="bg-purple-600 hover:bg-purple-700 text-white px-8 py-3 rounded-lg font-semibold uppercase tracking-wide btn-hover-effect transition duration-200">Join</button>
                    </div>
                </form>
            </div>
        </section>

        <section id="contact" class="py-20 md:py-32 bg-[#0a0a0a]">
            <div class="container mx-auto px-6 text-center">
                <h2 class="text-4xl md:text-5xl font-bold mb-6 fade-in">Connect</h2>
                <p class="text-gray-400 max-w-xl mx-auto mb-10 fade-in" style="transition-delay: 0.1s;">Got ideas? Questions? Collab dreams? Or just wanna share the vibe? Let's link.</p>
                <form class="max-w-lg mx-auto fade-in" style="transition-delay: 0.2s;">
                    <div class="mb-4"><input type="email" placeholder="Your Email" class="w-full px-4 py-3 bg-gray-800 border border-gray-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-600 focus:border-transparent text-white placeholder-gray-500"></div>
                    <div class="mb-4"><textarea placeholder="Your Message" rows="4" class="w-full px-4 py-3 bg-gray-800 border border-gray-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-600 focus:border-transparent text-white placeholder-gray-500"></textarea></div>
                    <button type="submit" class="bg-white text-black px-8 py-3 rounded-lg font-semibold uppercase tracking-wide btn-hover-effect w-full sm:w-auto">Send It</button>
                </form>
            </div>
        </section>

        <footer class="py-10 bg-black">
            <div class="container mx-auto px-6 text-center text-gray-500">
                 <div class="mb-4">
                    <button onclick="openGenericModal('sizeGuideModal')" class="text-gray-400 hover:text-white text-sm underline">Size Guide</button>
                    <span class="mx-2 text-gray-600">|</span>
                    <a href="admin.html" class="text-gray-400 hover:text-white text-sm underline">Admin Access</a>
                 </div>
                <p>&copy; <span id="current-year"></span> Triumind Collective. Stay True.</p>
                <div class="mt-4 space-x-6">
                    <a href="#" class="hover:text-gray-300">Instagram</a> <a href="#" class="hover:text-gray-300">Twitter</a> <a href="#" class="hover:text-gray-300">TikTok</a>
                </div>
            </div>
        </footer>
    </div> 
    
    <div id="full-site-countdown-overlay" class="hidden"> <div class="brand-logo text-glow">TRIUMIND</div>
        <p class="takeover-message">The Next Evolution is Approaching. Prepare Yourself.</p>
        <div class="countdown-timer-large">
            <div class="countdown-item-large"><div id="takeover-days" class="countdown-number-large">00</div><div class="countdown-label-large">Days</div></div>
            <div class="countdown-item-large"><div id="takeover-hours" class="countdown-number-large">00</div><div class="countdown-label-large">Hours</div></div>
            <div class="countdown-item-large"><div id="takeover-minutes" class="countdown-number-large">00</div><div class="countdown-label-large">Mins</div></div>
            <div class="countdown-item-large"><div id="takeover-seconds" class="countdown-number-large">00</div><div class="countdown-label-large">Secs</div></div>
        </div>
        <div id="takeover-drop-live-message" class="drop-live-message hidden">The Portal is Open!</div>
    </div>

    <div id="sizeGuideModal" class="modal">
      <div class="modal-content fade-in">
        <span class="close-button" onclick="closeGenericModal('sizeGuideModal')">&times;</span>
        <h3 class="text-2xl font-semibold mb-4">Size Guide (Example)</h3>
        <p class="text-gray-400 mb-4">Find your fit. Measurements are approximate.</p>
        <table class="size-table">
          <thead><tr><th>Size</th><th>Chest (in)</th><th>Length (in)</th><th>Sleeve (in)</th></tr></thead>
          <tbody>
            <tr><td>S</td><td>36-38</td><td>27</td><td>8</td></tr><tr><td>M</td><td>39-41</td><td>28</td><td>8.5</td></tr>
            <tr><td>L</td><td>42-44</td><td>29</td><td>9</td></tr><tr><td>XL</td><td>45-48</td><td>30</td><td>9.5</td></tr>
            <tr><td>XXL</td><td>49-52</td><td>31</td><td>10</td></tr>
          </tbody>
        </table>
         <p class="text-gray-400 mt-4 text-sm">Hoodies & Cargos may have different sizing. Check specific product details if available.</p>
      </div>
    </div>

    <div id="cart-modal"> 
        <div class="cart-header">
            <h2>Your Cart</h2>
            <button id="cart-close-button" class="cart-close-button">&times;</button>
        </div>
        <div id="cart-body" class="cart-body">
        </div>
        <div class="cart-footer">
            <div id="cart-total-container" class="cart-total hidden">
                <span>Total:</span>
                <span id="cart-total-price">$0.00</span>
            </div>
            <div class="my-4"> 
                <label for="cart-customer-email" class="block text-sm font-medium text-gray-400 mb-1">Email for Order & Newsletter:</label>
                <input type="email" id="cart-customer-email" name="cart-customer-email" required
                       class="w-full px-4 py-2 bg-gray-800 border border-gray-700 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-600 focus:border-transparent text-white placeholder-gray-500 transition duration-200"
                       placeholder="your.email@example.com">
            </div>
            <button id="cart-checkout-button" class="cart-checkout-button btn-hover-effect hidden">Complete Payment</button>
        </div>
    </div>

    <div id="toast-notification" class="toast-notification">Item added to cart!</div>

    <script>
        // --- Global Element References ---
        const spotlightHeading = document.getElementById('spotlight-heading');
        const customCursorEl = document.getElementById('custom-cursor');
        const heroSection = document.getElementById('hero');
        const heroBlobs = document.querySelectorAll('.hero-blob');
        const mobileMenuButton = document.getElementById('mobile-menu-button');
        const mobileMenu = document.getElementById('mobile-menu');
        const siteHeader = document.getElementById('header');
        const mainSiteContentWrapper = document.getElementById('main-site-content-wrapper');
        const fullSiteCountdownOverlay = document.getElementById('full-site-countdown-overlay'); 
        const modalOverlay = document.getElementById('modal-overlay'); 
        
        let mainCountdownInterval; 

        const cartModal = document.getElementById('cart-modal');
        const cartIconContainer = document.getElementById('cart-icon-container');
        const mobileCartIconContainer = document.getElementById('mobile-cart-icon-container');
        const cartCloseButton = document.getElementById('cart-close-button');
        const cartBody = document.getElementById('cart-body');
        const cartTotalPriceEl = document.getElementById('cart-total-price');
        const cartItemCountBadge = document.getElementById('cart-item-count-badge');
        const mobileCartItemCountBadge = document.getElementById('mobile-cart-item-count-badge');
        const cartTotalContainer = document.getElementById('cart-total-container');
        const cartCheckoutButton = document.getElementById('cart-checkout-button');
        const cartCustomerEmailInput = document.getElementById('cart-customer-email'); 
        const toastNotification = document.getElementById('toast-notification');
        let cartItems = [];

        function showToast(message) {
            if (!toastNotification) return;
            toastNotification.textContent = message;
            toastNotification.classList.add('show');
            setTimeout(() => {
                toastNotification.classList.remove('show');
            }, 3000); 
        }
        
        function openSharedModal(modalElement) {
            if (modalElement && modalOverlay) {
                modalOverlay.classList.add('open');
                modalElement.classList.add('open'); 
                document.body.classList.add('modal-open');
                if (customCursorEl && !document.body.classList.contains('site-takeover-active')) {
                    customCursorEl.style.opacity = '1';
                }
            }
        }

        function closeSharedModal(modalElement) {
            if (modalElement && modalOverlay) {
                modalOverlay.classList.remove('open');
                modalElement.classList.remove('open');
                const anyModalOpen = document.querySelector('#cart-modal.open, .modal.open'); 
                if (!anyModalOpen) {
                    document.body.classList.remove('modal-open');
                }
                if (!anyModalOpen && customCursorEl && !document.body.classList.contains('site-takeover-active')) {
                     customCursorEl.style.opacity = '1';
                }
            }
        }
        
        function openGenericModal(modalId) { 
            const modal = document.getElementById(modalId);
            if (modal && modalOverlay) {
                modalOverlay.classList.add('open');
                modal.style.display = "block"; 
                modal.classList.add('open'); 
                document.body.classList.add('modal-open');
                 if (customCursorEl && !document.body.classList.contains('site-takeover-active')) {
                    customCursorEl.style.opacity = '1';
                }
            }
        }
        function closeGenericModal(modalId) { 
            const modal = document.getElementById(modalId);
            if (modal && modalOverlay) {
                modalOverlay.classList.remove('open');
                modal.style.display = "none"; 
                modal.classList.remove('open');
                const anyModalOpen = document.querySelector('#cart-modal.open, .modal.open');
                if (!anyModalOpen) { 
                    document.body.classList.remove('modal-open');
                }
                if (!anyModalOpen && customCursorEl && !document.body.classList.contains('site-takeover-active')) {
                     customCursorEl.style.opacity = '1';
                }
            }
        }

        function openCart() { openSharedModal(cartModal); }
        function closeCart() { closeSharedModal(cartModal); }

        function loadCartFromStorage() {
            const storedCart = localStorage.getItem('triumindCart');
            if (storedCart) {
                try {
                    cartItems = JSON.parse(storedCart);
                } catch (e) {
                    console.error("Error parsing cart from localStorage:", e);
                    cartItems = [];
                }
            }
            renderCart();
        }

        function saveCartToStorage() {
            localStorage.setItem('triumindCart', JSON.stringify(cartItems));
        }

        function addToCart(productId, productName, productPrice, productImage, size, color) {
            const existingItemIndex = cartItems.findIndex(item => 
                item.id === productId && item.selectedSize === size && item.selectedColor === color
            );

            if (existingItemIndex > -1) {
                cartItems[existingItemIndex].quantity += 1;
            } else {
                cartItems.push({
                    id: productId,
                    name: productName,
                    price: parseFloat(productPrice),
                    image: productImage,
                    quantity: 1,
                    selectedSize: size, 
                    selectedColor: color 
                });
            }
            saveCartToStorage();
            renderCart();
            showToast(`${productName} (${size ? 'Size: ' + size + ' ' : ''}${color ? 'Color: ' + color : ''}) added to cart!`);
        }

        function updateCartItemQuantity(productId, newQuantity, size, color) { 
            const itemIndex = cartItems.findIndex(item => 
                item.id === productId && item.selectedSize === size && item.selectedColor === color
            );
            if (itemIndex > -1) {
                if (newQuantity <= 0) {
                    cartItems.splice(itemIndex, 1);
                } else {
                    cartItems[itemIndex].quantity = newQuantity;
                }
                saveCartToStorage();
                renderCart();
            }
        }

        function removeFromCart(productId, size, color) { 
            cartItems = cartItems.filter(item => 
                !(item.id === productId && item.selectedSize === size && item.selectedColor === color)
            );
            saveCartToStorage();
            renderCart();
            showToast(`Item removed from cart.`);
        }

        function renderCart() {
            if (!cartBody || !cartTotalPriceEl || !cartItemCountBadge || !mobileCartItemCountBadge || !cartTotalContainer || !cartCheckoutButton || !cartCustomerEmailInput) {
                console.warn("One or more cart elements are missing from the DOM.");
                return;
            }
            cartBody.innerHTML = ''; 
            if (cartItems.length === 0) {
                cartBody.innerHTML = '<p class="empty-cart-message">Your cart is currently empty. Go find some gear!</p>';
                cartTotalContainer.classList.add('hidden');
                cartCheckoutButton.classList.add('hidden');
                if(cartCustomerEmailInput) cartCustomerEmailInput.closest('div').classList.add('hidden'); 
            } else {
                cartTotalContainer.classList.remove('hidden');
                cartCheckoutButton.classList.remove('hidden');
                if(cartCustomerEmailInput) cartCustomerEmailInput.closest('div').classList.remove('hidden'); 
                cartItems.forEach(item => {
                    const itemElement = document.createElement('div');
                    itemElement.classList.add('cart-item');
                    let optionsText = '';
                    if (item.selectedSize) optionsText += `Size: ${item.selectedSize} `;
                    if (item.selectedColor) optionsText += `Color: ${item.selectedColor}`;

                    itemElement.innerHTML = `
                        <img src="${item.image || 'https://placehold.co/70x90/1a1a1a/cccccc?text=N/A'}" alt="${item.name}" class="cart-item-image" onerror="this.onerror=null;this.src='https://placehold.co/70x90/1a1a1a/cccccc?text=Error';">
                        <div class="cart-item-details">
                            <h3 class="cart-item-name">${item.name}</h3>
                            ${optionsText ? `<p class="cart-item-selected-options">${optionsText.trim()}</p>` : ''}
                            <p class="cart-item-price">$${item.price.toFixed(2)}</p>
                            <div class="cart-item-quantity">
                                <button class="quantity-decrease btn-hover-effect" data-id="${item.id}" data-size="${item.selectedSize || ''}" data-color="${item.selectedColor || ''}">-</button>
                                <span class="mx-2">${item.quantity}</span>
                                <button class="quantity-increase btn-hover-effect" data-id="${item.id}" data-size="${item.selectedSize || ''}" data-color="${item.selectedColor || ''}">+</button>
                            </div>
                        </div>
                        <div class="cart-item-remove">
                            <button class="remove-item-btn btn-hover-effect" data-id="${item.id}" data-size="${item.selectedSize || ''}" data-color="${item.selectedColor || ''}">Remove</button>
                        </div>
                    `;
                    cartBody.appendChild(itemElement);
                });
            }
            const totalPrice = cartItems.reduce((total, item) => total + (item.price * item.quantity), 0);
            cartTotalPriceEl.textContent = `$${totalPrice.toFixed(2)}`;
            const totalQuantity = cartItems.reduce((total, item) => total + item.quantity, 0);
            if (totalQuantity > 0) {
                cartItemCountBadge.textContent = totalQuantity;
                cartItemCountBadge.classList.remove('hidden');
                mobileCartItemCountBadge.textContent = totalQuantity;
                mobileCartItemCountBadge.classList.remove('hidden');
            } else {
                cartItemCountBadge.classList.add('hidden');
                mobileCartItemCountBadge.classList.add('hidden');
            }
            document.querySelectorAll('.quantity-decrease').forEach(button => {
                button.addEventListener('click', (e) => {
                    const { id, size, color } = e.target.dataset;
                    const item = cartItems.find(i => i.id === id && i.selectedSize == (size || null) && i.selectedColor == (color || null) );
                    if (item) updateCartItemQuantity(id, item.quantity - 1, size || null, color || null);
                });
            });
            document.querySelectorAll('.quantity-increase').forEach(button => {
                button.addEventListener('click', (e) => {
                    const { id, size, color } = e.target.dataset;
                    const item = cartItems.find(i => i.id === id && i.selectedSize == (size || null) && i.selectedColor == (color || null) );
                    if (item) updateCartItemQuantity(id, item.quantity + 1, size || null, color || null);
                });
            });
            document.querySelectorAll('.remove-item-btn').forEach(button => {
                button.addEventListener('click', (e) => {
                    const { id, size, color } = e.target.dataset;
                    removeFromCart(id, size || null, color || null);
                });
            });
        }

        function applySectionVisibility() {
            const settings = JSON.parse(localStorage.getItem('triumindSectionVisibility')) || {};
            const sectionMap = {
                countdownVisible: document.getElementById('countdown'),
                gearVisible: document.getElementById('gear'),
                storiesVisible: document.getElementById('stories'),
                reviewsVisible: document.getElementById('reviews'),
                newsletterVisible: document.getElementById('newsletter'),
                contactVisible: document.getElementById('contact')
            };

            for (const key in sectionMap) {
                const sectionElement = sectionMap[key];
                if (sectionElement) {
                    const shouldBeVisible = settings[key] !== undefined ? settings[key] : true;
                    if (shouldBeVisible) {
                        sectionElement.classList.remove('hidden');
                    } else {
                        sectionElement.classList.add('hidden');
                    }
                }
            }
        }

        if (spotlightHeading) spotlightHeading.textContent = "Triumind";
        
        if (customCursorEl) {
            document.addEventListener('mousemove', (e) => {
                 if (document.body.classList.contains('site-takeover-active')) {
                     customCursorEl.style.opacity = '0';
                 } else {
                     customCursorEl.style.opacity = '1'; 
                 }
                 requestAnimationFrame(() => { customCursorEl.style.transform = `translate(${e.clientX}px, ${e.clientY}px) translate(-50%, -50%)`; });
            });
        } 

        if (heroSection && spotlightHeading && heroBlobs.length > 0) {
            heroSection.addEventListener('mousemove', (e) => {
                requestAnimationFrame(() => {
                    const spotlightRect = spotlightHeading.getBoundingClientRect();
                    spotlightHeading.style.setProperty('--x', `${e.clientX - spotlightRect.left}px`);
                    spotlightHeading.style.setProperty('--y', `${e.clientY - spotlightRect.top}px`);
                    const heroRect = heroSection.getBoundingClientRect();
                    const moveX = (e.clientX - heroRect.left - heroRect.width / 2) * 0.02;
                    const moveY = (e.clientY - heroRect.top - heroRect.height / 2) * 0.02;
                    heroBlobs.forEach(blob => blob.style.transform = `translate(${moveX}px, ${moveY}px)`);
                });
            });
             heroSection.addEventListener('mouseleave', () => {
                 requestAnimationFrame(() => {
                     spotlightHeading.style.setProperty('--x', `50%`);
                     spotlightHeading.style.setProperty('--y', `50%`);
                     heroBlobs.forEach(blob => blob.style.transform = `translate(0px, 0px)`);
                 });
             });
        }

        const fadeInElements = document.querySelectorAll('.fade-in');
        if (fadeInElements.length > 0) {
            const fadeInObserver = new IntersectionObserver((entries) => {
                entries.forEach(entry => { if (entry.isIntersecting) entry.target.classList.add('visible'); });
            }, { threshold: 0.1 });
            fadeInElements.forEach(el => fadeInObserver.observe(el));
        }

        if (mobileMenuButton && mobileMenu && siteHeader) {
            mobileMenuButton.addEventListener('click', () => {
                const isHidden = mobileMenu.classList.toggle('hidden');
                siteHeader.style.borderRadius = !isHidden ? '1.5rem 1.5rem 0 0' : '9999px';
                if(!isHidden) mobileMenu.style.backgroundColor = getComputedStyle(siteHeader).backgroundColor;
            });
            mobileMenu.querySelectorAll('a').forEach(link => {
                link.addEventListener('click', () => { mobileMenu.classList.add('hidden'); siteHeader.style.borderRadius = '9999px'; });
            });
        }

        function updateCountdownDisplay(targetTimestamp, elements, liveMessageElement, timerContainerElement, mode) {
            const now = new Date().getTime();
            const distance = targetTimestamp - now;

            if (!elements.days || !elements.hours || !elements.minutes || !elements.seconds) {
                if (mainCountdownInterval) clearInterval(mainCountdownInterval);
                mainCountdownInterval = null;
                console.error("Countdown elements (days, hours, mins, secs) not found for display.");
                if (timerContainerElement) timerContainerElement.classList.add('hidden');
                if (liveMessageElement) liveMessageElement.classList.remove('hidden');
                return true; 
            }

            if (distance < 0) {
                if (mainCountdownInterval) clearInterval(mainCountdownInterval);
                mainCountdownInterval = null;
                elements.days.textContent = '00';
                elements.hours.textContent = '00';
                elements.minutes.textContent = '00';
                elements.seconds.textContent = '00';
                if (timerContainerElement) timerContainerElement.classList.add('hidden');
                if (liveMessageElement) liveMessageElement.classList.remove('hidden');
                
                if (mode === 'takeover') {
                    console.log("Takeover countdown finished. Updating localStorage and refreshing page in 2 seconds...");
                    const currentSettingsString = localStorage.getItem('triumindCountdownSettings');
                    if (currentSettingsString) {
                        try {
                            let currentSettings = JSON.parse(currentSettingsString);
                            currentSettings.mode = 'section'; 
                            localStorage.setItem('triumindCountdownSettings', JSON.stringify(currentSettings));
                            console.log("localStorage updated to prevent takeover re-trigger.");
                        } catch (e) {
                            console.error("Error updating localStorage for countdown settings:", e);
                        }
                    }
                    
                    setTimeout(() => {
                        window.location.reload();
                    }, 2000); 
                }
                return true; 
            } else {
                if (timerContainerElement) timerContainerElement.classList.remove('hidden');
                if (liveMessageElement) liveMessageElement.classList.add('hidden');
                elements.days.textContent = String(Math.floor(distance / (1000 * 60 * 60 * 24))).padStart(2, '0');
                elements.hours.textContent = String(Math.floor((distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60))).padStart(2, '0');
                elements.minutes.textContent = String(Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60))).padStart(2, '0');
                elements.seconds.textContent = String(Math.floor((distance % (1000 * 60)) / 1000)).padStart(2, '0');
            }
            return false; 
        }

        function startMainSiteCountdown() {
            if (mainCountdownInterval) clearInterval(mainCountdownInterval);
            mainCountdownInterval = null; 

            const countdownSettingsString = localStorage.getItem('triumindCountdownSettings');
            const countdownSectionEl = document.getElementById('countdown'); 
            const fullSiteOverlay = document.getElementById('full-site-countdown-overlay'); 

            if (countdownSectionEl) countdownSectionEl.classList.add('hidden');
            if (fullSiteOverlay) {
                fullSiteOverlay.classList.remove('visible');
                fullSiteOverlay.classList.add('hidden'); 
            }
            document.body.classList.remove('site-takeover-active');
             if (mainSiteContentWrapper) mainSiteContentWrapper.style.filter = 'none';


            if (!countdownSettingsString) {
                console.log("No countdown settings found in localStorage. Countdown will not be displayed.");
                return;
            }

            let countdownSettings;
            try {
                countdownSettings = JSON.parse(countdownSettingsString);
            } catch (e) {
                console.error("Error parsing countdown settings:", e);
                return;
            }

            const targetTimestamp = parseInt(countdownSettings.target);
            const mode = countdownSettings.mode; 

            if (isNaN(targetTimestamp)) {
                console.error("Invalid target timestamp for countdown.");
                return;
            }

            const sectionCountdownElements = {
                days: document.getElementById('days'),
                hours: document.getElementById('hours'),
                minutes: document.getElementById('minutes'),
                seconds: document.getElementById('seconds'),
                timerContainer: document.getElementById('countdown-timer') 
            };
            const sectionLiveMessage = document.getElementById('section-drop-live-message');

            const takeoverCountdownElements = {
                days: document.getElementById('takeover-days'),
                hours: document.getElementById('takeover-hours'),
                minutes: document.getElementById('takeover-minutes'),
                seconds: document.getElementById('takeover-seconds'),
                timerContainer: document.querySelector('#full-site-countdown-overlay .countdown-timer-large')
            };
            const takeoverLiveMessage = document.getElementById('takeover-drop-live-message');


            if (mode === 'takeover') {
                if (fullSiteOverlay) {
                     fullSiteOverlay.classList.remove('hidden'); 
                     fullSiteOverlay.classList.add('visible');   
                     document.body.classList.add('site-takeover-active');
                     if (mainSiteContentWrapper) mainSiteContentWrapper.style.filter = 'blur(0px)'; 
                    if (countdownSectionEl) countdownSectionEl.classList.add('hidden');

                    const isOverTakeover = updateCountdownDisplay(targetTimestamp, takeoverCountdownElements, takeoverLiveMessage, takeoverCountdownElements.timerContainer, 'takeover');
                    if (!isOverTakeover) {
                        mainCountdownInterval = setInterval(() => {
                            updateCountdownDisplay(targetTimestamp, takeoverCountdownElements, takeoverLiveMessage, takeoverCountdownElements.timerContainer, 'takeover');
                        }, 1000);
                    }
                } else {
                    console.error("Full site takeover overlay element not found.");
                }
            } else { 
                document.body.classList.remove('site-takeover-active');
                if (fullSiteOverlay) {
                    fullSiteOverlay.classList.remove('visible');
                    fullSiteOverlay.classList.add('hidden');
                }
                if (mainSiteContentWrapper) mainSiteContentWrapper.style.filter = 'none';

                const visibilitySettings = JSON.parse(localStorage.getItem('triumindSectionVisibility')) || {};
                const isCountdownSectionVisible = visibilitySettings.countdownVisible !== undefined ? visibilitySettings.countdownVisible : true;

                if (countdownSectionEl) {
                    if (isCountdownSectionVisible) {
                        countdownSectionEl.classList.remove('hidden');
                        const isOverSection = updateCountdownDisplay(targetTimestamp, sectionCountdownElements, sectionLiveMessage, sectionCountdownElements.timerContainer, 'section');
                        if (!isOverSection) {
                            mainCountdownInterval = setInterval(() => {
                                updateCountdownDisplay(targetTimestamp, sectionCountdownElements, sectionLiveMessage, sectionCountdownElements.timerContainer, 'section');
                            }, 1000);
                        }
                    } else {
                        countdownSectionEl.classList.add('hidden'); 
                    }
                } else {
                    console.error("Section countdown element not found.");
                }
            }
        }


        function renderProducts() {
            const productGrid = document.getElementById('product-grid');
            const noProductsMessageStorefront = document.getElementById('no-products-storefront');
            if (!productGrid || !noProductsMessageStorefront) {
                console.error("Product grid or no-products message element not found in storefront.");
                return;
            }
            let products = [];
            try {
                const storedProducts = localStorage.getItem('triumindProducts');
                if (storedProducts) products = JSON.parse(storedProducts);
            } catch (e) { console.error("Error parsing products from localStorage:", e); products = []; }
            
            const activeProducts = products.filter(product => product && product.status === 'Active');
            productGrid.innerHTML = ''; 

            if (activeProducts.length === 0) {
                noProductsMessageStorefront.classList.remove('hidden');
                productGrid.classList.add('hidden');
            } else {
                noProductsMessageStorefront.classList.add('hidden');
                productGrid.classList.remove('hidden');
                activeProducts.forEach(product => {
                    let imageUrl = 'https://placehold.co/600x700/111111/ffffff?text=Image+Coming'; 
                    if (product.images && Array.isArray(product.images) && product.images.length > 0) {
                        const primaryImage = product.images.find(img => img && img.isPrimary === true);
                        if (primaryImage && primaryImage.dataUrl) { imageUrl = primaryImage.dataUrl; }
                        else if (product.images[0] && product.images[0].dataUrl) { imageUrl = product.images[0].dataUrl; }
                    }
                    const productCardHTML = `
                        <div class="bg-gray-900 rounded-lg overflow-hidden shadow-xl flex flex-col fade-in">
                            <img src="${imageUrl}" alt="${product.name || 'Product Image'}" class="w-full h-auto object-cover img-hover-effect aspect-[6/7]" onerror="this.onerror=null;this.src='https://placehold.co/600x700/1a1a1a/cccccc?text=Image+Not+Found';">
                            <div class="p-6 flex flex-col flex-grow">
                                <h3 class="text-xl font-semibold mb-2">${product.name || 'Unnamed Product'}</h3>
                                <p class="text-gray-400 hidden mb-4 flex-grow text-sm">${(product.description || 'No description available.').substring(0,100)}${ (product.description || '').length > 100 ? '...' : ''}</p>
                                <div class="flex justify-between items-center mt-4">
                                    <span class="text-lg font-bold text-white">$${parseFloat(product.price || 0).toFixed(2)}</span>
                                    <a href="Gear.html?productId=${product.id}" class="view-product-link btn-hover-effect">
                                        View Product
                                    </a>
                                </div>
                                 <button onclick="openGenericModal('sizeGuideModal')" class="text-sm text-gray-400 hover:text-white mt-3 text-left self-start">Size Guide</button>
                            </div>
                        </div>
                    `;
                    productGrid.innerHTML += productCardHTML;
                });

                const newFadeInElements = productGrid.querySelectorAll('.fade-in');
                 if (newFadeInElements.length > 0) {
                    const fadeInObserver = new IntersectionObserver((entries) => {
                        entries.forEach(entry => { if (entry.isIntersecting) entry.target.classList.add('visible'); });
                    }, { threshold: 0.1 });
                    newFadeInElements.forEach(el => fadeInObserver.observe(el));
                }
            }
        }

        // --- Stories Rendering ---
        function renderStories() {
            const storiesGrid = document.getElementById('stories-grid');
            const noStoriesMessage = document.getElementById('no-stories-message');
            if (!storiesGrid || !noStoriesMessage) {
                console.error("Stories grid or no-stories message element not found.");
                return;
            }

            storiesGrid.innerHTML = ''; // Clear existing stories
            let stories = [];
            try {
                const storedStories = localStorage.getItem('triumindStories');
                if (storedStories) {
                    stories = JSON.parse(storedStories);
                }
            } catch (e) {
                console.error("Error parsing stories from localStorage:", e);
                stories = []; // Default to empty array on error
            }

            let displayedStoriesCount = 0;
            if (Array.isArray(stories)) {
                stories.forEach((story, index) => {
                    if (story && story.imageDataUrl) { // Only render if there's image data
                        const img = document.createElement('img');
                        img.src = story.imageDataUrl;
                        img.alt = `Style Story ${index + 1}`;
                        img.classList.add('rounded-lg', 'shadow-lg', 'img-hover-effect', 'w-full', 'h-auto', 'object-cover', 'aspect-[4/5]');
                        img.onerror = function() { 
                            this.src='https://placehold.co/400x500/1f1f1f/cccccc?text=Error'; 
                            // Optionally hide the element or the whole grid if an error occurs
                            // For now, it will show the placeholder.
                        };
                        storiesGrid.appendChild(img);
                        displayedStoriesCount++;
                    }
                });
            }

            if (displayedStoriesCount === 0) {
                noStoriesMessage.classList.remove('hidden');
                storiesGrid.classList.add('hidden'); // Hide grid if no stories
            } else {
                noStoriesMessage.classList.add('hidden');
                storiesGrid.classList.remove('hidden'); // Show grid
            }
        }
        
        document.addEventListener('DOMContentLoaded', () => {
            applySectionVisibility(); 
            startMainSiteCountdown(); 
            renderProducts(); 
            renderStories(); 
            loadCartFromStorage();

            const currentYearEl = document.getElementById('current-year');
            if (currentYearEl) currentYearEl.textContent = new Date().getFullYear();

            if (cartIconContainer) cartIconContainer.addEventListener('click', openCart);
            if (mobileCartIconContainer) mobileCartIconContainer.addEventListener('click', openCart);
            if (cartCloseButton) cartCloseButton.addEventListener('click', closeCart);
            
            if (modalOverlay) {
                modalOverlay.addEventListener('click', (event) => { 
                    if (event.target === modalOverlay) { 
                        if (cartModal && cartModal.classList.contains('open')) closeCart();
                        const sizeGuide = document.getElementById('sizeGuideModal');
                        if (sizeGuide && sizeGuide.style.display === "block") closeGenericModal('sizeGuideModal');
                    }
                });
            }


            if (cartCheckoutButton) {
                cartCheckoutButton.addEventListener('click', () => {
                    if (cartItems.length === 0) {
                        showToast('Your cart is empty.');
                        return;
                    }

                    const email = cartCustomerEmailInput ? cartCustomerEmailInput.value.trim() : '';
                    const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/; 

                    if (!email || !emailRegex.test(email)) {
                        showToast('Please enter a valid email to proceed.');
                        if (cartCustomerEmailInput) cartCustomerEmailInput.focus();
                        return;
                    }
                    
                    try {
                        let newsletterSignups = JSON.parse(localStorage.getItem('triumindNewsletterSignups')) || [];
                        if (!newsletterSignups.includes(email)) {
                            newsletterSignups.push(email);
                            localStorage.setItem('triumindNewsletterSignups', JSON.stringify(newsletterSignups));
                            showToast('Email saved for newsletter!');
                        }
                    } catch (e) {
                        console.error("Error saving email to newsletter list:", e);
                    }


                    showToast('Proceeding to checkout (simulation)...');
                    const newOrder = {
                        id: `ORD-${Date.now()}-${Math.random().toString(36).substr(2, 5)}`,
                        timestamp: new Date().toISOString(),
                        items: [...cartItems], 
                        totalAmount: cartItems.reduce((total, item) => total + (item.price * item.quantity), 0),
                        customerName: "Valued Customer", 
                        customerEmail: email, 
                        customerPhone: "555-123-4567",      
                        customerAddress: "123 Futura Drive, Sector 7", 
                        status: "Processing" 
                    };
                    try {
                        let orders = JSON.parse(localStorage.getItem('triumindOrders')) || [];
                        orders.push(newOrder);
                        localStorage.setItem('triumindOrders', JSON.stringify(orders));
                    } catch (e) {
                        console.error("Error saving order to localStorage:", e);
                        showToast('Error placing order. Please try again.');
                        return; 
                    }
                    setTimeout(() => {
                        cartItems = []; 
                        saveCartToStorage(); 
                        renderCart(); 
                        if(cartCustomerEmailInput) cartCustomerEmailInput.value = ''; 
                        closeCart();
                        showToast('Order placed (simulation)! Thank you.');
                    }, 1500);
                });
            }

            window.addEventListener('storage', (event) => {
                if (event.key === 'triumindProducts') { renderProducts(); }
                if (event.key === 'triumindCountdownSettings') { startMainSiteCountdown(); } 
                if (event.key === 'triumindSectionVisibility') { applySectionVisibility(); renderStories(); }
                if (event.key === 'triumindCart') { loadCartFromStorage(); } 
                if (event.key === 'triumindStories') { renderStories(); } 
            });

            document.addEventListener('keydown', (event) => {
                if (event.key === 'Escape' && document.body.classList.contains('modal-open')) {
                    if (cartModal && cartModal.classList.contains('open')) closeCart();
                    const sizeGuide = document.getElementById('sizeGuideModal');
                    if (sizeGuide && sizeGuide.style.display === "block") closeGenericModal('sizeGuideModal');
                }
            });
        });
    </script>
</body>
</html>
